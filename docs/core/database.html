<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core/database" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Database System | eliza</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://eliza.how/docs/core/database"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Database System | eliza"><meta data-rh="true" name="description" content="Understanding ElizaOS database system - persistent storage and data management for agents"><meta data-rh="true" property="og:description" content="Understanding ElizaOS database system - persistent storage and data management for agents"><meta data-rh="true" name="keywords" content="database,storage,adapters,PostgreSQL,PGLite,entities,memories,relationships,multi-tenant,embeddings"><meta data-rh="true" property="og:image" content="https://eliza.how/img/database.jpg"><meta data-rh="true" name="twitter:image" content="https://eliza.how/img/database.jpg"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://eliza.how/docs/core/database"><link data-rh="true" rel="alternate" href="https://eliza.how/docs/core/database" hreflang="en"><link data-rh="true" rel="alternate" href="https://eliza.how/docs/core/database" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Database Adapters","item":"https://eliza.how/docs/core/database"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ElizaOS Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ElizaOS Updates Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="ElizaOS Updates JSON Feed"><link rel="stylesheet" href="/assets/css/styles.e86eb28c.css">
<script src="/assets/js/runtime~main.0532bdd4.js" defer="defer"></script>
<script src="/assets/js/main.46fb91c6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/icon.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_G6ar" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_ncOr" style="background-color:var(--ifm-color-warning-light);color:#1f1f1f" role="banner"><div class="announcementBarPlaceholder_ajMw"></div><div class="content_L1uV announcementBarContent__57G">ğŸ”¥ Interact with our full documentation using your favorite LLM! <a href="/llms-full.txt" target="_blank" rel="noopener noreferrer">Copy <code>llms-full.txt</code></a> to get started. âœ¨</div><button type="button" aria-label="Close" class="clean-btn close closeButton_rfix announcementBarClose_c9u4"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon.png" alt="Eliza Logo" class="themedComponent_DHUr themedComponent--light_DIHH"><img src="/img/icon.png" alt="Eliza Logo" class="themedComponent_DHUr themedComponent--dark_Bv2M"></div><b class="navbar__title text--truncate">elizaOS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/api">API</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/packages">Packages</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/packages?tags=adapter">Adapters</a></li><li><a class="dropdown__link" href="/packages?tags=client">Clients</a></li><li><a class="dropdown__link" href="/packages?tags=plugin">Plugins</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/community">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/partners">Partners</a></li><li><a href="https://calendar.google.com/calendar/embed?src=c_ed31cea342d3e2236f549161e6446c3e407e5625ee7a355c0153befc7a602e7f%40group.calendar.google.com&amp;ctz=America%2FToronto" target="_blank" rel="noopener noreferrer" class="dropdown__link">Calendar</a></li><li><a class="dropdown__link" href="/community/videos">Video Gallery</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Blog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/blog">Main Blog</a></li><li><a href="https://elizaos.github.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Activity<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_awgD"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/core/database">1.0.10</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/core/database">1.0.10</a></li><li><a class="dropdown__link" href="/docs/0.25.9/core/database">0.25.9</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link header-rss-link" aria-label="RSS Feed" href="/blog"></a><ul class="dropdown__menu"><li><a href="/blog/rss.xml" class="dropdown__link" target="_blank">RSS (XML)</a></li><li><a href="/blog/atom.xml" class="dropdown__link" target="_blank">Atom</a></li><li><a href="/blog/feed.json" class="dropdown__link" target="_blank">JSON Feed</a></li></ul></div><a href="https://github.com/elizaos/eliza" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_OLSw colorModeToggle_Hg9V"><button class="clean-btn toggleButton_wYmb toggleButtonDisabled_vaDU" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_KEbZ lightToggleIcon_Sxwe"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_KEbZ darkToggleIcon_Yem1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_KEbZ systemToggleIcon_txm5"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_bmvg"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_UyTV"><div class="docsWrapper_XLvK"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_z1FD" type="button"></button><div class="docRoot_HciC"><aside class="theme-doc-sidebar-container docSidebarContainer_e5ai"><div class="sidebarViewport_N8x0"><div class="sidebar_vJCc"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_qiME menuWithAnnouncementBar_hRfJ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">ğŸš€ Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/quickstart">ğŸ Getting Started</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quickstart">â­ Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq">â“ FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributing">ğŸ‘¥ Contributing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs">ğŸ§  Core Concepts</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/actions">Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/agents">Agent Runtime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/core/database">Database Adapters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/entities">Entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/evaluators">Evaluators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/characters">Character Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/knowledge">Knowledge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/project">Project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/providers">Providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/rooms">Rooms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/services">Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/tasks">Tasks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/worlds">Worlds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/testing">Testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/cli/overview">ğŸ–¥ï¸ CLI</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/agent">Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/create">Create</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/dev">Dev</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/env">Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/publish">Publish</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/start">Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/test">Test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli/update">Update</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/rest/eliza-os-api">ğŸŒ REST API</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/awesome-eliza">Awesome elizaOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/changelog">CHANGELOG</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Ftvb"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_c4WT"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_namt"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_E60V"><div class="docItemContainer_cqrY"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_zCmv" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JFrk"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ğŸ§  Core Concepts</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Database Adapters</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0.10</span><div class="tocCollapsible_O_Qc theme-doc-toc-mobile tocMobile_tjDr"><button type="button" class="clean-btn tocCollapsibleButton_htYj">On this page</button></div><div class="docItemActions_Nji8"></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12 markdown"><header><h1>ğŸ’¾ Database System</h1></header>
<p>The ElizaOS database system provides persistent storage capabilities for agents. It handles memory storage, entity relationships, knowledge management, and more through a flexible adapter-based architecture with built-in multi-tenancy support.</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h2>
<!-- -->
<p>ElizaOS uses a unified database architecture based on Drizzle ORM with adapters that implement the <a href="/api/interfaces/IDatabaseAdapter"><code>IDatabaseAdapter</code></a> interface. The current release includes support for:</p>
<table><thead><tr><th>Adapter</th><th>Best For</th><th>Key Features</th></tr></thead><tbody><tr><td><strong>PGLite</strong></td><td>Local development &amp; testing</td><td>Lightweight PostgreSQL implementation running in Node.js process</td></tr><tr><td><strong>PostgreSQL</strong></td><td>Production deployments</td><td>Full PostgreSQL with vector search, scaling, and high reliability</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="multi-tenancy-architecture">Multi-Tenancy Architecture<a href="#multi-tenancy-architecture" class="hash-link" aria-label="Direct link to Multi-Tenancy Architecture" title="Direct link to Multi-Tenancy Architecture">â€‹</a></h2>
<p>ElizaOS implements a multi-tenant architecture where each agent operates in its own isolated data space:</p>
<ul>
<li><strong>Agent Isolation</strong>: Each agent has its own <code>agentId</code> that scopes all database operations</li>
<li><strong>Data Segregation</strong>: All queries are automatically filtered by the agent&#x27;s ID</li>
<li><strong>Shared Infrastructure</strong>: Multiple agents can share the same database instance while maintaining complete data isolation</li>
<li><strong>Embedding Consistency</strong>: Each agent must use consistent embedding dimensions throughout its lifecycle</li>
</ul>
<blockquote>
<p>âš ï¸ <strong>Important</strong>: Each agent MUST use the same embedding model throughout its lifetime. Mixing different embedding models (e.g., OpenAI with Google embeddings) within the same agent will cause vector search failures and inconsistent results.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="core-functionality">Core Functionality<a href="#core-functionality" class="hash-link" aria-label="Direct link to Core Functionality" title="Direct link to Core Functionality">â€‹</a></h2>
<p>All database adapters extend the <code>BaseDrizzleAdapter</code> abstract class, which provides a comprehensive set of methods for managing all aspects of agent data:</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="entity-system">Entity System<a href="#entity-system" class="hash-link" aria-label="Direct link to Entity System" title="Direct link to Entity System">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>createEntities()</code></td><td>Create new entities</td></tr><tr><td><code>getEntityByIds()</code></td><td>Retrieve entities by IDs</td></tr><tr><td><code>getEntitiesForRoom()</code></td><td>Get all entities in a room</td></tr><tr><td><code>updateEntity()</code></td><td>Update entity attributes</td></tr><tr><td><code>deleteEntity()</code></td><td>Delete an entity</td></tr><tr><td><code>getEntitiesByNames()</code></td><td>Find entities by their names</td></tr><tr><td><code>searchEntitiesByName()</code></td><td>Search entities with fuzzy matching</td></tr><tr><td><code>getComponent()</code></td><td>Get a specific component of an entity</td></tr><tr><td><code>getComponents()</code></td><td>Get all components for an entity</td></tr><tr><td><code>createComponent()</code></td><td>Add a component to an entity</td></tr><tr><td><code>updateComponent()</code></td><td>Update a component</td></tr><tr><td><code>deleteComponent()</code></td><td>Remove a component</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="memory-management">Memory Management<a href="#memory-management" class="hash-link" aria-label="Direct link to Memory Management" title="Direct link to Memory Management">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>createMemory()</code></td><td>Store a new memory with metadata</td></tr><tr><td><code>getMemoryById()</code></td><td>Retrieve a specific memory</td></tr><tr><td><code>getMemories()</code></td><td>Get memories matching criteria</td></tr><tr><td><code>getMemoriesByIds()</code></td><td>Get multiple memories by IDs</td></tr><tr><td><code>getMemoriesByRoomIds()</code></td><td>Get memories from multiple rooms</td></tr><tr><td><code>getMemoriesByWorldId()</code></td><td>Get memories from a world</td></tr><tr><td><code>searchMemories()</code></td><td>Search memories by vector similarity</td></tr><tr><td><code>searchMemoriesByEmbedding()</code></td><td>Search using raw embedding vector</td></tr><tr><td><code>updateMemory()</code></td><td>Update an existing memory</td></tr><tr><td><code>deleteMemory()</code></td><td>Remove a specific memory</td></tr><tr><td><code>deleteManyMemories()</code></td><td>Remove multiple memories in batch</td></tr><tr><td><code>deleteAllMemories()</code></td><td>Remove all memories in a room</td></tr><tr><td><code>countMemories()</code></td><td>Count memories matching criteria</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="room--participant-management">Room &amp; Participant Management<a href="#room--participant-management" class="hash-link" aria-label="Direct link to Room &amp; Participant Management" title="Direct link to Room &amp; Participant Management">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>createRooms()</code></td><td>Create new conversation rooms</td></tr><tr><td><code>getRoomsByIds()</code></td><td>Get rooms by their IDs</td></tr><tr><td><code>getRoomsByWorld()</code></td><td>Get all rooms in a world</td></tr><tr><td><code>updateRoom()</code></td><td>Update room attributes</td></tr><tr><td><code>deleteRoom()</code></td><td>Remove a room</td></tr><tr><td><code>deleteRoomsByWorldId()</code></td><td>Remove all rooms in a world</td></tr><tr><td><code>addParticipant()</code></td><td>Add entity to room</td></tr><tr><td><code>addParticipantsRoom()</code></td><td>Add multiple entities to room</td></tr><tr><td><code>removeParticipant()</code></td><td>Remove entity from room</td></tr><tr><td><code>getParticipantsForEntity()</code></td><td>Get all rooms an entity is in</td></tr><tr><td><code>getParticipantsForRoom()</code></td><td>List entities in a room</td></tr><tr><td><code>getRoomsForParticipant()</code></td><td>Get rooms for an entity</td></tr><tr><td><code>getRoomsForParticipants()</code></td><td>Get rooms for multiple entities</td></tr><tr><td><code>getParticipantUserState()</code></td><td>Get entity&#x27;s state in a room</td></tr><tr><td><code>setParticipantUserState()</code></td><td>Update entity&#x27;s state in a room</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="relationship-management">Relationship Management<a href="#relationship-management" class="hash-link" aria-label="Direct link to Relationship Management" title="Direct link to Relationship Management">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>createRelationship()</code></td><td>Create a relationship between entities</td></tr><tr><td><code>updateRelationship()</code></td><td>Update relationship attributes</td></tr><tr><td><code>getRelationship()</code></td><td>Get a specific relationship</td></tr><tr><td><code>getRelationships()</code></td><td>Get all relationships for an entity</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="caching-system">Caching System<a href="#caching-system" class="hash-link" aria-label="Direct link to Caching System" title="Direct link to Caching System">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>getCache()</code></td><td>Retrieve cached data</td></tr><tr><td><code>setCache()</code></td><td>Store data in cache</td></tr><tr><td><code>deleteCache()</code></td><td>Remove data from cache</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="world--task-management">World &amp; Task Management<a href="#world--task-management" class="hash-link" aria-label="Direct link to World &amp; Task Management" title="Direct link to World &amp; Task Management">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>createWorld()</code></td><td>Create a new world</td></tr><tr><td><code>getWorld()</code></td><td>Get world by ID</td></tr><tr><td><code>getAllWorlds()</code></td><td>List all worlds</td></tr><tr><td><code>updateWorld()</code></td><td>Update world attributes</td></tr><tr><td><code>removeWorld()</code></td><td>Delete a world</td></tr><tr><td><code>createTask()</code></td><td>Create a new task</td></tr><tr><td><code>getTasks()</code></td><td>Get tasks matching criteria</td></tr><tr><td><code>getTasksByName()</code></td><td>Find tasks by name</td></tr><tr><td><code>getTask()</code></td><td>Get task by ID</td></tr><tr><td><code>updateTask()</code></td><td>Update task attributes</td></tr><tr><td><code>deleteTask()</code></td><td>Remove a task</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="agent-management">Agent Management<a href="#agent-management" class="hash-link" aria-label="Direct link to Agent Management" title="Direct link to Agent Management">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>createAgent()</code></td><td>Create a new agent record</td></tr><tr><td><code>getAgent()</code></td><td>Get agent by ID</td></tr><tr><td><code>getAgents()</code></td><td>List all agents</td></tr><tr><td><code>updateAgent()</code></td><td>Update agent attributes</td></tr><tr><td><code>deleteAgent()</code></td><td>Remove an agent and all its data</td></tr><tr><td><code>countAgents()</code></td><td>Count total agents</td></tr><tr><td><code>cleanupAgents()</code></td><td>Clean up orphaned agents</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="embedding--search">Embedding &amp; Search<a href="#embedding--search" class="hash-link" aria-label="Direct link to Embedding &amp; Search" title="Direct link to Embedding &amp; Search">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>ensureEmbeddingDimension()</code></td><td>Configure embedding dimensions</td></tr><tr><td><code>getCachedEmbeddings()</code></td><td>Retrieve cached embeddings</td></tr><tr><td><code>searchMemories()</code></td><td>Vector search for memories</td></tr><tr><td><code>searchMemoriesByEmbedding()</code></td><td>Advanced vector search with embedding</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="logging-system">Logging System<a href="#logging-system" class="hash-link" aria-label="Direct link to Logging System" title="Direct link to Logging System">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>log()</code></td><td>Create a log entry</td></tr><tr><td><code>getLogs()</code></td><td>Retrieve logs by criteria</td></tr><tr><td><code>deleteLog()</code></td><td>Delete a specific log entry</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="message-server-operations-central-database">Message Server Operations (Central Database)<a href="#message-server-operations-central-database" class="hash-link" aria-label="Direct link to Message Server Operations (Central Database)" title="Direct link to Message Server Operations (Central Database)">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>createMessageServer()</code></td><td>Create a new message server</td></tr><tr><td><code>getMessageServers()</code></td><td>Get all message servers</td></tr><tr><td><code>getMessageServerById()</code></td><td>Get a specific message server</td></tr><tr><td><code>createChannel()</code></td><td>Create a new channel</td></tr><tr><td><code>getChannelsForServer()</code></td><td>Get channels for a server</td></tr><tr><td><code>getChannelDetails()</code></td><td>Get channel information</td></tr><tr><td><code>updateChannel()</code></td><td>Update channel attributes</td></tr><tr><td><code>deleteChannel()</code></td><td>Delete a channel</td></tr><tr><td><code>createMessage()</code></td><td>Create a new message</td></tr><tr><td><code>getMessagesForChannel()</code></td><td>Get messages from a channel</td></tr><tr><td><code>deleteMessage()</code></td><td>Delete a message</td></tr><tr><td><code>addChannelParticipants()</code></td><td>Add users to a channel</td></tr><tr><td><code>getChannelParticipants()</code></td><td>Get users in a channel</td></tr><tr><td><code>addAgentToServer()</code></td><td>Add agent to a server</td></tr><tr><td><code>getAgentsForServer()</code></td><td>Get agents for a server</td></tr><tr><td><code>removeAgentFromServer()</code></td><td>Remove agent from server</td></tr><tr><td><code>findOrCreateDmChannel()</code></td><td>Find or create DM channel</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture">â€‹</a></h2>
<p>ElizaOS uses a singleton pattern for database connections to ensure efficient resource usage:</p>
<div class="language-text codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-text codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           AgentRuntime              â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                â–¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚        IDatabaseAdapter             â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                â–¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       BaseDrizzleAdapter            â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   (Full implementation in base.ts)  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â–¼               â–¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ PGLiteAdapter â”‚ â”‚ PostgresAdapter â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚                  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â–¼                  â–¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚PGLiteManager  â”‚ â”‚PostgresManager  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  (Singleton)  â”‚ â”‚  (Singleton)    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span></code></pre></div></div>
<p>Each adapter is associated with a singleton connection manager that ensures only one database connection is maintained per process, regardless of how many agents are running.</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="implementation">Implementation<a href="#implementation" class="hash-link" aria-label="Direct link to Implementation" title="Direct link to Implementation">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="initialization">Initialization<a href="#initialization" class="hash-link" aria-label="Direct link to Initialization" title="Direct link to Initialization">â€‹</a></h3>
<p>The database adapter is initialized through the SQL plugin:</p>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Plugin registration in project configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> project </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;@elizaos/plugin-sql&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>The SQL plugin automatically selects and initializes the appropriate database adapter based on environment settings:</p>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createDatabaseAdapter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataDir</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    postgresUrl</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  agentId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">UUID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">IDatabaseAdapter</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">postgresUrl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PgDatabaseAdapter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">agentId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> postgresConnectionManager</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Default to PGLite</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">SqliteDatabaseAdapter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">agentId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pgLiteClientManager</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">â€‹</a></h3>
<p>Configure the database adapter using environment variables or settings:</p>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// For PostgreSQL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">POSTGRES_URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;postgresql://username:password@localhost:5432/elizaos&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// For PGLite (default)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SQLITE_DATA_DIR</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./.elizadb&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Optional, defaults to &#x27;./.elizadb&#x27;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="embedding-dimension-management">Embedding Dimension Management<a href="#embedding-dimension-management" class="hash-link" aria-label="Direct link to Embedding Dimension Management" title="Direct link to Embedding Dimension Management">â€‹</a></h3>
<p>The embedding dimension is set during agent initialization based on the text embedding model:</p>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// The dimension is automatically determined by the embedding model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Common dimensions:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - OpenAI: 1536</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - Google: 768</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - Anthropic: 1024</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - Local models: varies (384, 512, 768, etc.)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The system automatically calls ensureEmbeddingDimension()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// when creating the first memory with embeddings</span><br></span></code></pre></div></div>
<blockquote>
<p>âš ï¸ <strong>Critical</strong>: Once an agent starts using a specific embedding model, it MUST continue using the same model. Switching embedding models mid-operation will result in:</p>
<ul>
<li>Vector search failures</li>
<li>Inconsistent similarity scores</li>
<li>Potential runtime errors</li>
<li>Degraded agent performance</li>
</ul>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="retry-logic--error-handling">Retry Logic &amp; Error Handling<a href="#retry-logic--error-handling" class="hash-link" aria-label="Direct link to Retry Logic &amp; Error Handling" title="Direct link to Retry Logic &amp; Error Handling">â€‹</a></h3>
<p>The database system includes built-in retry logic with exponential backoff and jitter:</p>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">withRetry</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name constant" style="color:#36acaa">T</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function-variable function" style="color:#d73a49">operation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> lastError</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Error</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Unknown error&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> attempt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> attempt </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">maxRetries</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> attempt</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">operation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      lastError </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> error </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> </span><span class="token known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">attempt </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">maxRetries</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> backoffDelay </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">baseDelay</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">attempt </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">maxDelay</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> jitter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">jitterMax</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> delay </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> backoffDelay </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> jitter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resolve </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> delay</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> lastError</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="example-usage">Example Usage<a href="#example-usage" class="hash-link" aria-label="Direct link to Example Usage" title="Direct link to Example Usage">â€‹</a></h2>
<p>Here are examples of common database operations:</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="store-a-memory">Store a Memory<a href="#store-a-memory" class="hash-link" aria-label="Direct link to Store a Memory" title="Direct link to Store a Memory">â€‹</a></h3>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Memory creation automatically uses the agent&#x27;s configured embedding dimension</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createMemory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entityId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">entityId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    agentId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">agentId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Important information to remember&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    roomId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">roomId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    embedding</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useModel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">ModelType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">TEXT_EMBEDDING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Important information to remember&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;facts&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="search-for-memories">Search for Memories<a href="#search-for-memories" class="hash-link" aria-label="Direct link to Search for Memories" title="Direct link to Search for Memories">â€‹</a></h3>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Embedding must be from the same model type as used during creation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> embedding </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useModel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">ModelType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">TEXT_EMBEDDING</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;What did we discuss about databases?&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> relevantMemories </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">searchMemories</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tableName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;messages&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  embedding</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  roomId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">roomId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  match_threshold</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="manage-entity-relationships">Manage Entity Relationships<a href="#manage-entity-relationships" class="hash-link" aria-label="Direct link to Manage Entity Relationships" title="Direct link to Manage Entity Relationships">â€‹</a></h3>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Create a relationship between entities</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createRelationship</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sourceEntityId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> userEntityId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  targetEntityId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> agentEntityId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;friend&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;frequent_interaction&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    interactions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trust_level</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;high&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Retrieve relationships</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> relationships </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getRelationships</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  entityId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> userEntityId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;friend&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="database-schema">Database Schema<a href="#database-schema" class="hash-link" aria-label="Direct link to Database Schema" title="Direct link to Database Schema">â€‹</a></h2>
<p>The schema is managed by Drizzle ORM and includes the following key tables:</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="core-tables">Core Tables<a href="#core-tables" class="hash-link" aria-label="Direct link to Core Tables" title="Direct link to Core Tables">â€‹</a></h3>
<ul>
<li><strong>agents</strong>: Agent configuration and state (multi-tenant root)</li>
<li><strong>entities</strong>: The fundamental objects in the system (users, agents, etc.)</li>
<li><strong>components</strong>: Modular data attached to entities (profiles, settings, etc.)</li>
<li><strong>memories</strong>: Conversation history and other remembered information</li>
<li><strong>embeddings</strong>: Vector embeddings for semantic search (supports multiple dimensions)</li>
<li><strong>relationships</strong>: Connections between entities</li>
<li><strong>rooms</strong>: Conversation channels</li>
<li><strong>participants</strong>: Entity participation in rooms</li>
<li><strong>worlds</strong>: Container for multiple rooms</li>
<li><strong>tasks</strong>: Scheduled or queued operations</li>
<li><strong>cache</strong>: Temporary key-value storage</li>
<li><strong>logs</strong>: System and event logs</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="message-server-tables-central-database">Message Server Tables (Central Database)<a href="#message-server-tables-central-database" class="hash-link" aria-label="Direct link to Message Server Tables (Central Database)" title="Direct link to Message Server Tables (Central Database)">â€‹</a></h3>
<ul>
<li><strong>message_servers</strong>: Server definitions</li>
<li><strong>channels</strong>: Communication channels</li>
<li><strong>messages</strong>: Message history</li>
<li><strong>channel_participants</strong>: Channel membership</li>
<li><strong>server_agents</strong>: Agent-server associations</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="entity-component-system">Entity-Component System<a href="#entity-component-system" class="hash-link" aria-label="Direct link to Entity-Component System" title="Direct link to Entity-Component System">â€‹</a></h3>
<p>ElizaOS uses an entity-component architecture where:</p>
<ul>
<li>Entities are the base objects (users, agents, etc.)</li>
<li>Components are pieces of data attached to entities</li>
<li>This allows for flexible data modeling and extension</li>
</ul>
<p>For example, a user entity might have profile, preferences, and authentication components.</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="vector-search">Vector Search<a href="#vector-search" class="hash-link" aria-label="Direct link to Vector Search" title="Direct link to Vector Search">â€‹</a></h2>
<p>Both adapters support vector-based semantic search with embedding dimension flexibility:</p>
<ul>
<li><strong>PostgreSQL</strong>: Uses pgvector extension for optimized vector operations</li>
<li><strong>PGLite</strong>: Implements vector search using cosine distance calculations</li>
</ul>
<p>The system supports multiple embedding dimensions (384, 512, 768, 1024, 1536, 3072) but each agent must use only one consistently:</p>
<div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// The embedding dimension is automatically set based on the first embedding stored</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Supported dimensions are defined in DIMENSION_MAP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DIMENSION_MAP</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">384</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dim_384&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">512</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dim_512&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">768</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dim_768&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dim_1024&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1536</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dim_1536&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">3072</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dim_3072&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="how-do-i-choose-between-pglite-and-postgresql">How do I choose between PGLite and PostgreSQL?<a href="#how-do-i-choose-between-pglite-and-postgresql" class="hash-link" aria-label="Direct link to How do I choose between PGLite and PostgreSQL?" title="Direct link to How do I choose between PGLite and PostgreSQL?">â€‹</a></h3>
<ul>
<li>
<p>Use <strong>PGLite</strong> for:</p>
<ul>
<li>Local development and testing</li>
<li>Single-user deployments</li>
<li>Situations where installing PostgreSQL is impractical</li>
</ul>
</li>
<li>
<p>Use <strong>PostgreSQL</strong> for:</p>
<ul>
<li>Production deployments</li>
<li>Multi-user systems</li>
<li>High-volume data</li>
<li>When you need advanced scaling features</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="how-do-i-configure-the-database-connection">How do I configure the database connection?<a href="#how-do-i-configure-the-database-connection" class="hash-link" aria-label="Direct link to How do I configure the database connection?" title="Direct link to How do I configure the database connection?">â€‹</a></h3>
<p>For PostgreSQL, set the <code>POSTGRES_URL</code> environment variable:</p>
<div class="language-text codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-text codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token plain">POSTGRES_URL=postgresql://username:password@localhost:5432/elizaos</span><br></span></code></pre></div></div>
<p>For PGLite, set the data directory (optional):</p>
<div class="language-text codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kX1v"><pre tabindex="0" class="prism-code language-text codeBlock_TAPP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#393A34"><span class="token plain">SQLITE_DATA_DIR=./my-data</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="what-about-embedding-model-consistency">What about embedding model consistency?<a href="#what-about-embedding-model-consistency" class="hash-link" aria-label="Direct link to What about embedding model consistency?" title="Direct link to What about embedding model consistency?">â€‹</a></h3>
<p><strong>Critical Requirements:</strong></p>
<ol>
<li>Each agent must use the same embedding model throughout its lifetime</li>
<li>Never mix embedding models within the same agent</li>
<li>If you need to change models, create a new agent</li>
<li>Document which embedding model each agent uses</li>
</ol>
<p><strong>Why this matters:</strong></p>
<ul>
<li>Different models produce embeddings of different dimensions</li>
<li>Embeddings from different models are not comparable</li>
<li>Mixing models will break vector search functionality</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="how-does-multi-tenancy-work">How does multi-tenancy work?<a href="#how-does-multi-tenancy-work" class="hash-link" aria-label="Direct link to How does multi-tenancy work?" title="Direct link to How does multi-tenancy work?">â€‹</a></h3>
<ul>
<li>Each agent operates in its own isolated data space</li>
<li>All database operations are automatically scoped by <code>agentId</code></li>
<li>Multiple agents can share the same database instance</li>
<li>Data isolation is enforced at the query level</li>
<li>No cross-agent data access is possible</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="how-can-i-inspect-the-database-contents">How can I inspect the database contents?<a href="#how-can-i-inspect-the-database-contents" class="hash-link" aria-label="Direct link to How can I inspect the database contents?" title="Direct link to How can I inspect the database contents?">â€‹</a></h3>
<p>For PostgreSQL, use standard PostgreSQL tools like pgAdmin or psql.</p>
<p>For PGLite, the data is stored in the specified data directory. You can use the PGLite Studio or standard PostgreSQL clients that support local connections.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="how-do-i-handle-agent-deletion">How do I handle agent deletion?<a href="#how-do-i-handle-agent-deletion" class="hash-link" aria-label="Direct link to How do I handle agent deletion?" title="Direct link to How do I handle agent deletion?">â€‹</a></h3>
<p>The <code>deleteAgent()</code> method performs a complete cascade deletion:</p>
<ol>
<li>Deletes all memories and embeddings</li>
<li>Removes all entities and components</li>
<li>Cleans up rooms and participants</li>
<li>Removes relationships and logs</li>
<li>Deletes the agent record itself</li>
</ol>
<p>This ensures no orphaned data remains in the database.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="how-can-i-improve-database-performance">How can I improve database performance?<a href="#how-can-i-improve-database-performance" class="hash-link" aria-label="Direct link to How can I improve database performance?" title="Direct link to How can I improve database performance?">â€‹</a></h3>
<ul>
<li>
<p>For <strong>PostgreSQL</strong>:</p>
<ul>
<li>Ensure the pgvector extension is properly installed</li>
<li>Create indexes on frequently queried fields</li>
<li>Use connection pooling</li>
<li>Consider partitioning for large datasets</li>
</ul>
</li>
<li>
<p>For <strong>PGLite</strong>:</p>
<ul>
<li>Keep database size reasonable (under 1GB)</li>
<li>Regularly clean up old memories</li>
<li>Limit the number of concurrent operations</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id="will-other-database-adapters-be-supported-in-the-future">Will other database adapters be supported in the future?<a href="#will-other-database-adapters-be-supported-in-the-future" class="hash-link" aria-label="Direct link to Will other database adapters be supported in the future?" title="Direct link to Will other database adapters be supported in the future?">â€‹</a></h3>
<p>The adapter interface is designed to be extensible. Future releases may include support for additional databases, but all will need to implement the full <code>IDatabaseAdapter</code> interface as defined in the <code>BaseDrizzleAdapter</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id="further-reading">Further Reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further Reading" title="Direct link to Further Reading">â€‹</a></h2>
<ul>
<li><a href="/docs/core/entities">Entity System</a></li>
<li><a href="/docs/core/agents">Agent Runtime</a></li>
</ul></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/elizaos/eliza/tree/develop/packages/docs/docs/core/database.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_UohW" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_g62E"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-06-17T21:38:33.000Z" itemprop="dateModified">Jun 17, 2025</time></b> by <b>0xbbjoker</b></span></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/core/agents"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Agent Runtime</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/core/entities"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Entities</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_TN1Q thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#multi-tenancy-architecture" class="table-of-contents__link toc-highlight">Multi-Tenancy Architecture</a></li><li><a href="#core-functionality" class="table-of-contents__link toc-highlight">Core Functionality</a><ul><li><a href="#entity-system" class="table-of-contents__link toc-highlight">Entity System</a></li><li><a href="#memory-management" class="table-of-contents__link toc-highlight">Memory Management</a></li><li><a href="#room--participant-management" class="table-of-contents__link toc-highlight">Room &amp; Participant Management</a></li><li><a href="#relationship-management" class="table-of-contents__link toc-highlight">Relationship Management</a></li><li><a href="#caching-system" class="table-of-contents__link toc-highlight">Caching System</a></li><li><a href="#world--task-management" class="table-of-contents__link toc-highlight">World &amp; Task Management</a></li><li><a href="#agent-management" class="table-of-contents__link toc-highlight">Agent Management</a></li><li><a href="#embedding--search" class="table-of-contents__link toc-highlight">Embedding &amp; Search</a></li><li><a href="#logging-system" class="table-of-contents__link toc-highlight">Logging System</a></li><li><a href="#message-server-operations-central-database" class="table-of-contents__link toc-highlight">Message Server Operations (Central Database)</a></li></ul></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">Implementation</a><ul><li><a href="#initialization" class="table-of-contents__link toc-highlight">Initialization</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#embedding-dimension-management" class="table-of-contents__link toc-highlight">Embedding Dimension Management</a></li><li><a href="#retry-logic--error-handling" class="table-of-contents__link toc-highlight">Retry Logic &amp; Error Handling</a></li></ul></li><li><a href="#example-usage" class="table-of-contents__link toc-highlight">Example Usage</a><ul><li><a href="#store-a-memory" class="table-of-contents__link toc-highlight">Store a Memory</a></li><li><a href="#search-for-memories" class="table-of-contents__link toc-highlight">Search for Memories</a></li><li><a href="#manage-entity-relationships" class="table-of-contents__link toc-highlight">Manage Entity Relationships</a></li></ul></li><li><a href="#database-schema" class="table-of-contents__link toc-highlight">Database Schema</a><ul><li><a href="#core-tables" class="table-of-contents__link toc-highlight">Core Tables</a></li><li><a href="#message-server-tables-central-database" class="table-of-contents__link toc-highlight">Message Server Tables (Central Database)</a></li><li><a href="#entity-component-system" class="table-of-contents__link toc-highlight">Entity-Component System</a></li></ul></li><li><a href="#vector-search" class="table-of-contents__link toc-highlight">Vector Search</a></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#how-do-i-choose-between-pglite-and-postgresql" class="table-of-contents__link toc-highlight">How do I choose between PGLite and PostgreSQL?</a></li><li><a href="#how-do-i-configure-the-database-connection" class="table-of-contents__link toc-highlight">How do I configure the database connection?</a></li><li><a href="#what-about-embedding-model-consistency" class="table-of-contents__link toc-highlight">What about embedding model consistency?</a></li><li><a href="#how-does-multi-tenancy-work" class="table-of-contents__link toc-highlight">How does multi-tenancy work?</a></li><li><a href="#how-can-i-inspect-the-database-contents" class="table-of-contents__link toc-highlight">How can I inspect the database contents?</a></li><li><a href="#how-do-i-handle-agent-deletion" class="table-of-contents__link toc-highlight">How do I handle agent deletion?</a></li><li><a href="#how-can-i-improve-database-performance" class="table-of-contents__link toc-highlight">How can I improve database performance?</a></li><li><a href="#will-other-database-adapters-be-supported-in-the-future" class="table-of-contents__link toc-highlight">Will other database adapters be supported in the future?</a></li></ul></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/core/">General</a></li><li class="footer__item"><a href="https://eliza.how/llms.txt" target="_blank" rel="noopener noreferrer" class="footer__link-item">llms.txt<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_awgD"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://eliza.how/llms-full.txt" target="_blank" rel="noopener noreferrer" class="footer__link-item">llms-full.txt<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_awgD"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.elizaos.ai/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_awgD"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discord.gg/elizaos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_awgD"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/elizaos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_awgD"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/news/rss.xml">RSS</a></li><li class="footer__item"><a href="https://github.com/elizaos/eliza" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_awgD"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>