"use strict";(self.webpackChunk_elizaos_docs=self.webpackChunk_elizaos_docs||[]).push([[3339],{30184:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>I,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"core/rooms","title":"Rooms System","description":"Understanding ElizaOS rooms - interaction spaces for entities to exchange messages and communicate","source":"@site/docs/core/rooms.md","sourceDirName":"core","slug":"/core/rooms","permalink":"/docs/core/rooms","draft":false,"unlisted":false,"editUrl":"https://github.com/elizaos/eliza/tree/develop/packages/docs/docs/core/rooms.md","tags":[],"version":"current","lastUpdatedBy":"0xbbjoker","lastUpdatedAt":1750196313000,"sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Rooms System","description":"Understanding ElizaOS rooms - interaction spaces for entities to exchange messages and communicate","keywords":["rooms","channels","conversations","participants","messages","interaction","communication"],"image":"/img/elizaos-rooms-simplified.svg"},"sidebar":"tutorialSidebar","previous":{"title":"Providers","permalink":"/docs/core/providers"},"next":{"title":"Services","permalink":"/docs/core/services"}}');var s=i(31085),r=i(71184);const o={sidebar_position:8,title:"Rooms System",description:"Understanding ElizaOS rooms - interaction spaces for entities to exchange messages and communicate",keywords:["rooms","channels","conversations","participants","messages","interaction","communication"],image:"/img/elizaos-rooms-simplified.svg"},d="Rooms",a={},l=[{value:"Room Structure",id:"room-structure",level:2},{value:"Room Types",id:"room-types",level:2},{value:"Room Creation and Management",id:"room-creation-and-management",level:2},{value:"Creating a Room",id:"creating-a-room",level:3},{value:"Creating Multiple Rooms",id:"creating-multiple-rooms",level:3},{value:"Ensuring a Room Exists",id:"ensuring-a-room-exists",level:3},{value:"Retrieving Room Information",id:"retrieving-room-information",level:3},{value:"Updating Room Properties",id:"updating-room-properties",level:3},{value:"Deleting a Room",id:"deleting-a-room",level:3},{value:"Deleting All Rooms in a World",id:"deleting-all-rooms-in-a-world",level:3},{value:"Participants in Rooms",id:"participants-in-rooms",level:2},{value:"Managing Room Participants",id:"managing-room-participants",level:3},{value:"Participant States",id:"participant-states",level:3},{value:"Self Rooms",id:"self-rooms",level:2},{value:"Memory and Messages in Rooms",id:"memory-and-messages-in-rooms",level:2},{value:"Events Related to Rooms",id:"events-related-to-rooms",level:2},{value:"Handling Room Events",id:"handling-room-events",level:3},{value:"Room Connection with External Systems",id:"room-connection-with-external-systems",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Creating a DM Room",id:"creating-a-dm-room",level:3},{value:"Platform Integration Example",id:"platform-integration-example",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"rooms",children:"Rooms"})}),"\n",(0,s.jsx)(n.p,{children:"Rooms in ElizaOS represent individual interaction spaces within a world. A room can be a conversation, a channel, a thread, or any other defined space where entities can exchange messages and interact. Rooms are typically contained within a world, though they can also exist independently."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(97998).A+"",width:"800",height:"600"})}),"\n",(0,s.jsx)(n.h2,{id:"room-structure",children:"Room Structure"}),"\n",(0,s.jsx)(n.p,{children:"A room in ElizaOS has the following properties:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Room = {\n  id: UUID;\n  name?: string;\n  agentId: UUID; // Required - the agent that owns this room\n  source: string; // Platform origin (e.g., 'discord', 'telegram')\n  type: ChannelType; // Type of room (DM, GROUP, etc.)\n  channelId?: string; // External system channel identifier\n  serverId?: string; // External system server identifier\n  worldId?: UUID; // Parent world ID (optional)\n  metadata?: Record<string, unknown>;\n};\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Required"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"id"})}),(0,s.jsx)(n.td,{children:"Unique identifier for the room"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:"Display name for the room"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"agentId"})}),(0,s.jsx)(n.td,{children:"ID of the agent that owns this room"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"source"})}),(0,s.jsx)(n.td,{children:"The platform or origin of the room (e.g., 'discord', 'telegram')"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"type"})}),(0,s.jsx)(n.td,{children:"Type of room (DM, GROUP, THREAD, etc.)"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"channelId"})}),(0,s.jsx)(n.td,{children:"External system channel identifier"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"serverId"})}),(0,s.jsx)(n.td,{children:"External system server identifier"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"worldId"})}),(0,s.jsx)(n.td,{children:"ID of the parent world"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"metadata"})}),(0,s.jsx)(n.td,{children:"Additional room configuration data"}),(0,s.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"room-types",children:"Room Types"}),"\n",(0,s.jsxs)(n.p,{children:["ElizaOS supports several room types, defined in the ",(0,s.jsx)(n.code,{children:"ChannelType"})," enum:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Common Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SELF"})}),(0,s.jsx)(n.td,{children:"Agent's own room for internal messages"}),(0,s.jsx)(n.td,{children:"Agent initialization"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DM"})}),(0,s.jsx)(n.td,{children:"Direct messages between two participants"}),(0,s.jsx)(n.td,{children:"Private conversations"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"GROUP"})}),(0,s.jsx)(n.td,{children:"Group messages with multiple participants"}),(0,s.jsx)(n.td,{children:"Team chats, channels"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VOICE_DM"})}),(0,s.jsx)(n.td,{children:"Voice direct messages"}),(0,s.jsx)(n.td,{children:"Voice calls"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VOICE_GROUP"})}),(0,s.jsx)(n.td,{children:"Voice channels with multiple participants"}),(0,s.jsx)(n.td,{children:"Voice meetings"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FEED"})}),(0,s.jsx)(n.td,{children:"Social media feed"}),(0,s.jsx)(n.td,{children:"Twitter, Instagram"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"THREAD"})}),(0,s.jsx)(n.td,{children:"Threaded conversation"}),(0,s.jsx)(n.td,{children:"Forum discussions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"WORLD"})}),(0,s.jsx)(n.td,{children:"World-level channel"}),(0,s.jsx)(n.td,{children:"World announcements"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FORUM"})}),(0,s.jsx)(n.td,{children:"Forum discussion"}),(0,s.jsx)(n.td,{children:"Q&A platforms"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"room-creation-and-management",children:"Room Creation and Management"}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-room",children:"Creating a Room"}),"\n",(0,s.jsxs)(n.p,{children:["When creating a room, the ",(0,s.jsx)(n.code,{children:"agentId"})," is automatically set from the runtime:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const roomId = await runtime.createRoom({\n  id: customRoomId, // Optional - will generate if not provided\n  name: 'general-chat',\n  source: 'discord',\n  type: ChannelType.GROUP,\n  channelId: 'external-channel-id',\n  serverId: 'external-server-id',\n  worldId: parentWorldId, // Optional\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"creating-multiple-rooms",children:"Creating Multiple Rooms"}),"\n",(0,s.jsx)(n.p,{children:"You can create multiple rooms at once for better performance:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const roomIds = await runtime.createRooms([\n  {\n    name: 'general',\n    source: 'discord',\n    type: ChannelType.GROUP,\n    worldId: worldId,\n  },\n  {\n    name: 'announcements',\n    source: 'discord',\n    type: ChannelType.GROUP,\n    worldId: worldId,\n  },\n]);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ensuring-a-room-exists",children:"Ensuring a Room Exists"}),"\n",(0,s.jsx)(n.p,{children:"To create a room only if it doesn't already exist:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"await runtime.ensureRoomExists({\n  id: roomId,\n  name: 'general-chat',\n  source: 'discord',\n  type: ChannelType.GROUP,\n  channelId: 'external-channel-id',\n  serverId: 'external-server-id',\n  worldId: parentWorldId,\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"retrieving-room-information",children:"Retrieving Room Information"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Get a single room by ID\nconst room = await runtime.getRoom(roomId);\n\n// Get multiple rooms by IDs\nconst rooms = await runtime.getRoomsByIds([roomId1, roomId2, roomId3]);\n\n// Get all rooms in a world (preferred method)\nconst worldRooms = await runtime.getRoomsByWorld(worldId);\n\n// Deprecated - use getRoomsByWorld instead\n// const worldRooms = await runtime.getRooms(worldId);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updating-room-properties",children:"Updating Room Properties"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"await runtime.updateRoom({\n  id: roomId,\n  name: 'renamed-channel',\n  metadata: {\n    ...room.metadata,\n    customProperty: 'value',\n  },\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"deleting-a-room",children:"Deleting a Room"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u26a0\ufe0f Warning"}),": Deleting a room will also delete:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All messages in the room"}),"\n",(0,s.jsx)(n.li,{children:"All embeddings for those messages"}),"\n",(0,s.jsx)(n.li,{children:"All participant relationships"}),"\n",(0,s.jsx)(n.li,{children:"All logs associated with the room"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"await runtime.deleteRoom(roomId);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"deleting-all-rooms-in-a-world",children:"Deleting All Rooms in a World"}),"\n",(0,s.jsx)(n.p,{children:"Delete all rooms associated with a specific world:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"await runtime.deleteRoomsByWorldId(worldId);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"participants-in-rooms",children:"Participants in Rooms"}),"\n",(0,s.jsx)(n.p,{children:"Rooms can have multiple participants (entities) that can exchange messages."}),"\n",(0,s.jsx)(n.h3,{id:"managing-room-participants",children:"Managing Room Participants"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Add a single participant to a room\nawait runtime.addParticipant(entityId, roomId);\n\n// Add multiple participants at once (more efficient)\nawait runtime.addParticipantsRoom([entityId1, entityId2, entityId3], roomId);\n\n// Remove a participant from a room\nawait runtime.removeParticipant(entityId, roomId);\n\n// Get all participants in a room\nconst participantIds = await runtime.getParticipantsForRoom(roomId);\n\n// Get all rooms where an entity is a participant\nconst entityRooms = await runtime.getRoomsForParticipant(entityId);\n\n// Get rooms for multiple participants\nconst sharedRooms = await runtime.getRoomsForParticipants([entityId1, entityId2]);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"participant-states",children:"Participant States"}),"\n",(0,s.jsx)(n.p,{children:"Participants can have different states in a room:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Get a participant's state in a room\nconst state = await runtime.getParticipantUserState(roomId, entityId);\n// Returns: 'FOLLOWED', 'MUTED', or null\n\n// Set a participant's state in a room\nawait runtime.setParticipantUserState(roomId, entityId, 'FOLLOWED');\n"})}),"\n",(0,s.jsx)(n.p,{children:"The participant states are:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"State"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FOLLOWED"})}),(0,s.jsx)(n.td,{children:"The agent actively follows the conversation and responds without being directly mentioned"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MUTED"})}),(0,s.jsx)(n.td,{children:"The agent ignores messages in this room"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"null"})}),(0,s.jsx)(n.td,{children:"Default state - the agent responds only when directly mentioned"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"self-rooms",children:"Self Rooms"}),"\n",(0,s.jsx)(n.p,{children:'Every agent automatically gets a "self" room during initialization. This is a special room where:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The room ID equals the agent ID"}),"\n",(0,s.jsxs)(n.li,{children:["The room type is ",(0,s.jsx)(n.code,{children:"SELF"})]}),"\n",(0,s.jsx)(n.li,{children:"The agent is automatically added as a participant"}),"\n",(0,s.jsx)(n.li,{children:"Used for internal agent operations and self-directed messages"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// During agent initialization, this happens automatically:\nconst selfRoom = await runtime.createRoom({\n  id: runtime.agentId,\n  name: runtime.character.name,\n  source: 'elizaos',\n  type: ChannelType.SELF,\n  channelId: runtime.agentId,\n  serverId: runtime.agentId,\n  worldId: runtime.agentId,\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"memory-and-messages-in-rooms",children:"Memory and Messages in Rooms"}),"\n",(0,s.jsx)(n.p,{children:"Rooms store messages as memories in the database:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Create a new message in a room\nconst messageId = await runtime.createMemory(\n  {\n    entityId: senderEntityId,\n    agentId: runtime.agentId,\n    roomId: roomId,\n    content: {\n      text: 'Hello, world!',\n      source: 'discord',\n    },\n    metadata: {\n      type: 'message',\n    },\n  },\n  'messages' // table name\n);\n\n// Retrieve recent messages from a room\nconst messages = await runtime.getMemories({\n  roomId: roomId,\n  tableName: 'messages',\n  count: 10,\n  unique: true,\n});\n\n// Get messages from multiple rooms\nconst multiRoomMessages = await runtime.getMemoriesByRoomIds({\n  roomIds: [roomId1, roomId2],\n  tableName: 'messages',\n  limit: 50,\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"events-related-to-rooms",children:"Events Related to Rooms"}),"\n",(0,s.jsx)(n.p,{children:"ElizaOS emits events related to room activities:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Payload"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ROOM_JOINED"})}),(0,s.jsx)(n.td,{children:"Emitted when an entity joins a room"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ runtime, entityId, roomId }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ROOM_LEFT"})}),(0,s.jsx)(n.td,{children:"Emitted when an entity leaves a room"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ runtime, entityId, roomId }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MESSAGE_RECEIVED"})}),(0,s.jsx)(n.td,{children:"Emitted when a message is received in a room"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ runtime, message }"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MESSAGE_SENT"})}),(0,s.jsx)(n.td,{children:"Emitted when a message is sent to a room"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ runtime, message }"})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"handling-room-events",children:"Handling Room Events"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Register event handlers in your plugin\nconst myPlugin: Plugin = {\n  name: 'my-room-plugin',\n  description: 'Handles room events',\n\n  events: {\n    [EventTypes.ROOM_JOINED]: [\n      async (payload) => {\n        const { runtime, entityId, roomId } = payload;\n        console.log(`Entity ${entityId} joined room ${roomId}`);\n      },\n    ],\n\n    [EventTypes.MESSAGE_RECEIVED]: [\n      async (payload: MessagePayload) => {\n        const { runtime, message } = payload;\n        console.log(`Message received in room ${message.roomId}`);\n      },\n    ],\n  },\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"room-connection-with-external-systems",children:"Room Connection with External Systems"}),"\n",(0,s.jsx)(n.p,{children:"When integrating with external platforms, rooms are typically mapped to channels, conversations, or other interaction spaces:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Ensure the connection exists for a room from an external system\nawait runtime.ensureConnection({\n  entityId: userEntityId,\n  roomId: roomId,\n  userName: 'username',\n  name: 'display-name',\n  source: 'discord',\n  channelId: 'external-channel-id',\n  serverId: 'external-server-id',\n  type: ChannelType.GROUP,\n  worldId: parentWorldId,\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Always specify agentId"}),": While the runtime sets it automatically, be aware that rooms are agent-specific"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use appropriate room types"}),": Select the most appropriate room type for each interaction context"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create worlds first"}),": If using worlds, create them before creating rooms"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use batch operations"}),": When creating multiple rooms or adding multiple participants, use batch methods"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use ensureRoomExists"}),": This prevents duplicate rooms when syncing with external systems"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Be careful with deletion"}),": Remember that deleting rooms cascades to all related data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use metadata wisely"}),": Store platform-specific data in metadata rather than creating new fields"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Handle participant states"}),": Implement clear rules for when agents should follow or mute rooms"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-dm-room",children:"Creating a DM Room"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Create a direct message room between agent and user\nconst dmRoom = await runtime.createRoom({\n  name: `DM-${userId}`,\n  source: 'discord',\n  type: ChannelType.DM,\n  metadata: {\n    participants: [runtime.agentId, userId],\n  },\n});\n\n// Add both participants\nawait runtime.addParticipantsRoom([runtime.agentId, userId], dmRoom);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"platform-integration-example",children:"Platform Integration Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Discord channel integration\nasync function syncDiscordChannel(channel: DiscordChannel, guildId: string) {\n  // Ensure world exists for the Discord server\n  await runtime.ensureWorldExists({\n    id: createUniqueUuid(runtime.agentId, guildId),\n    name: `Discord Server ${guildId}`,\n    serverId: guildId,\n  });\n\n  // Ensure room exists for the channel\n  await runtime.ensureRoomExists({\n    id: createUniqueUuid(runtime.agentId, channel.id),\n    name: channel.name,\n    source: 'discord',\n    type: channel.type === 'text' ? ChannelType.GROUP : ChannelType.VOICE_GROUP,\n    channelId: channel.id,\n    serverId: guildId,\n    worldId: createUniqueUuid(runtime.agentId, guildId),\n  });\n}\n"})})]})}function I(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},71184:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var t=i(14041);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},97998:(e,n,i)=>{i.d(n,{A:()=>t});const t="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4MDAgNjAwIj4KICA8IS0tIEJhY2tncm91bmQgZ3JhZGllbnQgLS0+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImJnR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMUExRTJEIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMyNTJCM0QiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgCiAgICA8IS0tIEdsb3dzIC0tPgogICAgPGZpbHRlciBpZD0ic29mdEdsb3ciIHg9Ii0zMCUiIHk9Ii0zMCUiIHdpZHRoPSIxNjAlIiBoZWlnaHQ9IjE2MCUiPgogICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiByZXN1bHQ9ImJsdXIiIC8+CiAgICAgIDxmZUNvbXBvc2l0ZSBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJibHVyIiBvcGVyYXRvcj0ib3ZlciIgLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIEJhY2tncm91bmQgLS0+CiAgPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9InVybCgjYmdHcmFkaWVudCkiIC8+CiAgCiAgPCEtLSBUaXRsZSAtLT4KICA8dGV4dCB4PSI0MDAiIHk9IjgwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzYiIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICBmaWxsPSIjRTVFOUYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Sb29tczwvdGV4dD4KICA8dGV4dCB4PSI0MDAiIHk9IjEyMCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiAKICAgICAgICBmaWxsPSIjODhDMEQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5pbiBFbGl6YU9TPC90ZXh0PgogIAogIDwhLS0gTWFpbiBDaGF0IEludGVyZmFjZSAtLT4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MDAsIDMyMCkiPgogICAgPCEtLSBDaGF0IENvbnRhaW5lciAtLT4KICAgIDxyZWN0IHg9Ii0yNTAiIHk9Ii0xNTAiIHdpZHRoPSI1MDAiIGhlaWdodD0iMzAwIiByeD0iMTAiIHJ5PSIxMCIgCiAgICAgICAgICBmaWxsPSIjMkUzNDQwIiBzdHJva2U9IiM0QzU2NkEiIHN0cm9rZS13aWR0aD0iMiIgLz4KICAgIAogICAgPCEtLSBTaWRlYmFyIC0gbGlrZSBEaXNjb3JkL1NsYWNrIC0tPgogICAgPHJlY3QgeD0iLTI1MCIgeT0iLTE1MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzI3MkMzNiIgLz4KICAgIAogICAgPCEtLSBDaGFubmVsIGxpc3QgLS0+CiAgICA8ZyBmaWxsPSIjODhDMEQwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiPgogICAgICA8dGV4dCB4PSItMjEwIiB5PSItMTE1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4jIGdlbmVyYWw8L3RleHQ+CiAgICAgIDx0ZXh0IHg9Ii0yMTAiIHk9Ii04NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI0U1RTlGMCIgZm9udC13ZWlnaHQ9ImJvbGQiPiMgc3VwcG9ydDwvdGV4dD4KICAgICAgPHRleHQgeD0iLTIxMCIgeT0iLTU1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4jIHJhbmRvbTwvdGV4dD4KICAgICAgPHRleHQgeD0iLTIxMCIgeT0iLTI1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4jIGRldjwvdGV4dD4KICAgICAgCiAgICAgIDx0ZXh0IHg9Ii0yMjAiIHk9IjIwIiB0ZXh0LWFuY2hvcj0ic3RhcnQiPlRIUkVBRFM8L3RleHQ+CiAgICAgIDx0ZXh0IHg9Ii0yMTAiIHk9IjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjExIj4jIGZlYXR1cmUtcmVxPC90ZXh0PgogICAgICA8dGV4dCB4PSItMjEwIiB5PSI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMSI+IyBidWctcmVwb3J0PC90ZXh0PgogICAgPC9nPgogICAgCiAgICA8IS0tIENoYXQgSGVhZGVyIC0tPgogICAgPHJlY3QgeD0iLTE3MCIgeT0iLTE1MCIgd2lkdGg9IjQyMCIgaGVpZ2h0PSI0MCIgZmlsbD0iIzI3MkMzNiIgLz4KICAgIDx0ZXh0IHg9Ii0xNTAiIHk9Ii0xMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiIgZmlsbD0iI0U1RTlGMCIgZm9udC13ZWlnaHQ9ImJvbGQiPiMgc3VwcG9ydDwvdGV4dD4KICAgIDx0ZXh0IHg9IjE4MCIgeT0iLTEyNSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjODhDMEQwIj4zIG1lbWJlcnM8L3RleHQ+CiAgICAKICAgIDwhLS0gQ2hhdCBNZXNzYWdlcyAtLT4KICAgIDxnIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiI+CiAgICAgIDwhLS0gVXNlciBtZXNzYWdlIC0tPgogICAgICA8Y2lyY2xlIGN4PSItMTUwIiBjeT0iLTgwIiByPSIxNSIgZmlsbD0iIzg4QzBEMCIgLz4KICAgICAgPHRleHQgeD0iLTEyMCIgeT0iLTg1IiBmb250LXNpemU9IjE0IiBmaWxsPSIjRTVFOUYwIiBmb250LXdlaWdodD0iYm9sZCI+VXNlcjE8L3RleHQ+CiAgICAgIDx0ZXh0IHg9Ii0xMjAiIHk9Ii02NSIgZm9udC1zaXplPSIxMyIgZmlsbD0iI0U1RTlGMCI+SG93IGRvIEkgY29ubmVjdCBteSBhcHAgdG8gRWxpemFPUz88L3RleHQ+CiAgICAgIAogICAgICA8IS0tIEFnZW50IG1lc3NhZ2UgLS0+CiAgICAgIDxjaXJjbGUgY3g9Ii0xNTAiIGN5PSItMjAiIHI9IjE1IiBmaWxsPSIjQjQ4RUFEIiAvPgogICAgICA8dGV4dCB4PSItMTIwIiB5PSItMjUiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiNFNUU5RjAiIGZvbnQtd2VpZ2h0PSJib2xkIj5TdXBwb3J0QWdlbnQ8L3RleHQ+CiAgICAgIDx0ZXh0IHg9Ii0xMjAiIHk9Ii01IiBmb250LXNpemU9IjEzIiBmaWxsPSIjRTVFOUYwIj5Zb3UnbGwgbmVlZCB0byB1c2Ugb3VyIEFQSS4gSSBjYW4gaGVscCB5b3Ugc2V0IHVwLi4uPC90ZXh0PgogICAgICAKICAgICAgPCEtLSBBbm90aGVyIHVzZXIgbWVzc2FnZSAtLT4KICAgICAgPGNpcmNsZSBjeD0iLTE1MCIgY3k9IjQwIiByPSIxNSIgZmlsbD0iI0EzQkU4QyIgLz4KICAgICAgPHRleHQgeD0iLTEyMCIgeT0iMzUiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiNFNUU5RjAiIGZvbnQtd2VpZ2h0PSJib2xkIj5Vc2VyMjwvdGV4dD4KICAgICAgPHRleHQgeD0iLTEyMCIgeT0iNTUiIGZvbnQtc2l6ZT0iMTMiIGZpbGw9IiNFNUU5RjAiPkknbSBoYXZpbmcgdGhlIHNhbWUgaXNzdWUuIENhbiB5b3Ugc2hhcmUgZG9jcz88L3RleHQ+CiAgICAgIAogICAgICA8IS0tIFRocmVhZCBpbmRpY2F0b3IgLS0+CiAgICAgIDxsaW5lIHgxPSItMTQwIiB5MT0iNzAiIHgyPSItMTIwIiB5Mj0iNzAiIHN0cm9rZT0iIzRDNTY2QSIgc3Ryb2tlLXdpZHRoPSIyIiAvPgogICAgICA8dGV4dCB4PSItMTEwIiB5PSI3NSIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzg4QzBEMCI+MyByZXBsaWVzPC90ZXh0PgogICAgPC9nPgogICAgCiAgICA8IS0tIE1lc3NhZ2UgaW5wdXQgLS0+CiAgICA8cmVjdCB4PSItMTYwIiB5PSIxMTAiIHdpZHRoPSIzOTAiIGhlaWdodD0iMzAiIHJ4PSIxNSIgcnk9IjE1IiAKICAgICAgICAgIGZpbGw9IiMzQjQyNTIiIHN0cm9rZT0iIzRDNTY2QSIgc3Ryb2tlLXdpZHRoPSIxIiAvPgogICAgPHRleHQgeD0iLTE0MCIgeT0iMTMwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiNEOERFRTkiIG9wYWNpdHk9IjAuNiI+TWVzc2FnZSAjc3VwcG9ydC4uLjwvdGV4dD4KICA8L2c+CiAgCiAgPCEtLSBGbG9hdGluZyBleHBsYW5hdGlvbiBidWJibGVzIC0tPgogIDxnIGZpbHRlcj0idXJsKCNzb2Z0R2xvdykiPgogICAgPCEtLSBSb29tIGV4cGxhbmF0aW9uIC0tPgogICAgPHJlY3QgeD0iMTAwIiB5PSI0NDAiIHdpZHRoPSIxNjAiIGhlaWdodD0iNzAiIHJ4PSIxMCIgcnk9IjEwIiBmaWxsPSIjNEM1NjZBIiBvcGFjaXR5PSIwLjkiIC8+CiAgICA8dGV4dCB4PSIxODAiIHk9IjQ2NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjRUNFRkY0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXdlaWdodD0iYm9sZCI+Um9vbXM8L3RleHQ+CiAgICA8dGV4dCB4PSIxODAiIHk9IjQ4NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjRTVFOUYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5MaWtlIGNoYW5uZWxzIGluIERpc2NvcmQ8L3RleHQ+CiAgICA8dGV4dCB4PSIxODAiIHk9IjUwMCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjRTVFOUYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5vciBTbGFjayB3b3Jrc3BhY2VzPC90ZXh0PgogICAgCiAgICA8IS0tIFRocmVhZCBleHBsYW5hdGlvbiAtLT4KICAgIDxyZWN0IHg9IjU2MCIgeT0iNDQwIiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjcwIiByeD0iMTAiIHJ5PSIxMCIgZmlsbD0iIzRDNTY2QSIgb3BhY2l0eT0iMC45IiAvPgogICAgPHRleHQgeD0iNjQwIiB5PSI0NjUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iI0VDRUZGNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC13ZWlnaHQ9ImJvbGQiPlRocmVhZHM8L3RleHQ+CiAgICA8dGV4dCB4PSI2NDAiIHk9IjQ4NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjRTVFOUYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5OZXN0ZWQgY29udmVyc2F0aW9uczwvdGV4dD4KICAgIDx0ZXh0IHg9IjY0MCIgeT0iNTAwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiNFNUU5RjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPndpdGhpbiBhIHJvb208L3RleHQ+CiAgICAKICAgIDwhLS0gTGluZSBjb25uZWN0b3JzIC0tPgogICAgPGxpbmUgeDE9IjE1MCIgeTE9IjQ0MCIgeDI9IjIxMCIgeTI9IjM4MCIgc3Ryb2tlPSIjODhDMEQwIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWRhc2hhcnJheT0iMywyIiAvPgogICAgPGxpbmUgeDE9IjYwMCIgeTE9IjQ0MCIgeDI9IjQwMCIgeTI9IjM5MCIgc3Ryb2tlPSIjODhDMEQwIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWRhc2hhcnJheT0iMywyIiAvPgogIDwvZz4KICAKICA8IS0tIEJvdHRvbSBkZXNjcmlwdG9yIC0tPgogIDx0ZXh0IHg9IjQwMCIgeT0iNTUwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IiM4OEMwRDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPgogICAgSW5kaXZpZHVhbCBzcGFjZXMgZm9yIGNvbnZlcnNhdGlvbnMgYW5kIGludGVyYWN0aW9ucwogIDwvdGV4dD4KPC9zdmc+"}}]);