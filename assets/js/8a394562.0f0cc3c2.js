"use strict";(self.webpackChunk_elizaos_docs=self.webpackChunk_elizaos_docs||[]).push([[24927],{16686:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"plugins/migration/claude-code/integrated-migration-loop","title":"ElizaOS Plugin Migration - INTEGRATED EXECUTION PROTOCOL","description":"\u26a0\ufe0f CRITICAL INSTRUCTIONS FOR CLAUDE CODE","source":"@site/docs/plugins/migration/claude-code/integrated-migration-loop.md","sourceDirName":"plugins/migration/claude-code","slug":"/plugins/migration/claude-code/integrated-migration-loop","permalink":"/docs/plugins/migration/claude-code/integrated-migration-loop","draft":false,"unlisted":false,"editUrl":"https://github.com/elizaos/eliza/tree/develop/packages/docs/docs/plugins/migration/claude-code/integrated-migration-loop.md","tags":[],"version":"current","lastUpdatedBy":"0xbbjoker","lastUpdatedAt":1751365903000,"frontMatter":{}}');var t=n(31085),l=n(71184);const d={},r="ElizaOS Plugin Migration - INTEGRATED EXECUTION PROTOCOL",c={},a=[{value:"\u26a0\ufe0f CRITICAL INSTRUCTIONS FOR CLAUDE CODE",id:"\ufe0f-critical-instructions-for-claude-code",level:2},{value:"YOUR REFERENCE GUIDES ARE IN:",id:"your-reference-guides-are-in",level:3},{value:"EXECUTION PROTOCOL - GATE SYSTEM",id:"execution-protocol---gate-system",level:2},{value:"GATE 0: CREATE 1.x BRANCH \u2713",id:"gate-0-create-1x-branch-",level:2},{value:"Execute:",id:"execute",level:3},{value:"Gate Check:",id:"gate-check",level:3},{value:"GATE 1: COMPLETE ANALYSIS \u2713",id:"gate-1-complete-analysis-",level:2},{value:"Reference:",id:"reference",level:3},{value:"Execute Analysis:",id:"execute-analysis",level:3},{value:"REQUIRED OUTPUT - COMPLETE THIS:",id:"required-output---complete-this",level:3},{value:"GATE 2: INITIAL SETUP \u2713",id:"gate-2-initial-setup-",level:2},{value:"Reference: Follow <code>migration-guide.md</code> Steps 1-5 EXACTLY",id:"reference-follow-migration-guidemd-steps-1-5-exactly",level:3},{value:"2.1 Clean Files (migration-guide.md Step 2)",id:"21-clean-files-migration-guidemd-step-2",level:3},{value:"2.2 Update package.json (migration-guide.md Step 3)",id:"22-update-packagejson-migration-guidemd-step-3",level:3},{value:"2.3 TypeScript Config (migration-guide.md Step 4)",id:"23-typescript-config-migration-guidemd-step-4",level:3},{value:"2.4 Build Test (migration-guide.md Step 5)",id:"24-build-test-migration-guidemd-step-5",level:3},{value:"Gate Check:",id:"gate-check-1",level:3},{value:"GATE 3: BUILD MUST PASS \u2713",id:"gate-3-build-must-pass-",level:2},{value:"Loop Until Build Passes:",id:"loop-until-build-passes",level:3},{value:"GATE 4: TYPESCRIPT MUST PASS \u2713",id:"gate-4-typescript-must-pass-",level:2},{value:"Reference: Check <code>advanced-migration-guide.md</code> for type issues",id:"reference-check-advanced-migration-guidemd-for-type-issues",level:3},{value:"Loop Until No Errors:",id:"loop-until-no-errors",level:3},{value:"GATE 5: CODE MIGRATION \u2713",id:"gate-5-code-migration-",level:2},{value:"For EACH File Identified in Analysis:",id:"for-each-file-identified-in-analysis",level:3},{value:"ACTIONS (Use migration-guide.md Step 6):",id:"actions-use-migration-guidemd-step-6",level:4},{value:"PROVIDERS (Use migration-guide.md Step 7):",id:"providers-use-migration-guidemd-step-7",level:4},{value:"ADVANCED FEATURES:",id:"advanced-features",level:4},{value:"SPECIAL CASES:",id:"special-cases",level:4},{value:"GATE 6: TESTS MUST REACH 95%+ \u2713",id:"gate-6-tests-must-reach-95-",level:2},{value:"Reference: Use testing-guide.md COMPLETELY",id:"reference-use-testing-guidemd-completely",level:3},{value:"6.1 Create Test Structure (testing-guide.md Section 1)",id:"61-create-test-structure-testing-guidemd-section-1",level:3},{value:"6.2 Create test-utils.ts (testing-guide.md Section 2)",id:"62-create-test-utilsts-testing-guidemd-section-2",level:3},{value:"6.3 Write Tests Following Examples:",id:"63-write-tests-following-examples",level:3},{value:"6.4 Coverage Loop:",id:"64-coverage-loop",level:3},{value:"Common Test Issues (testing-guide.md Section 10):",id:"common-test-issues-testing-guidemd-section-10",level:3},{value:"GATE 7: FINAL SETUP \u2713",id:"gate-7-final-setup-",level:2},{value:"Reference: Follow completion-requirements.md EXACTLY",id:"reference-follow-completion-requirementsmd-exactly",level:3},{value:"7.1 Create Required Files:",id:"71-create-required-files",level:3},{value:"7.2 GitHub Workflow (Section 6):",id:"72-github-workflow-section-6",level:3},{value:"7.3 Verify package.json (Section 4):",id:"73-verify-packagejson-section-4",level:3},{value:"7.4 Format Code:",id:"74-format-code",level:3},{value:"7.5 Update README:",id:"75-update-readme",level:3},{value:"GATE 8: FINAL VERIFICATION \u2713",id:"gate-8-final-verification-",level:2},{value:"Clean Build Test:",id:"clean-build-test",level:3},{value:"All Must Pass:",id:"all-must-pass",level:3},{value:"\ud83d\udea8 WHEN STUCK - GUIDE REFERENCE",id:"-when-stuck---guide-reference",level:2},{value:"Build/Setup Issues:",id:"buildsetup-issues",level:3},{value:"Action Migration Issues:",id:"action-migration-issues",level:3},{value:"Provider Issues:",id:"provider-issues",level:3},{value:"Service/Settings Issues:",id:"servicesettings-issues",level:3},{value:"Test Issues:",id:"test-issues",level:3},{value:"Final Setup:",id:"final-setup",level:3},{value:"\u274c DO NOT PROCEED IF:",id:"-do-not-proceed-if",level:2},{value:"\u2705 MIGRATION COMPLETE WHEN:",id:"-migration-complete-when",level:2}];function o(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"elizaos-plugin-migration---integrated-execution-protocol",children:"ElizaOS Plugin Migration - INTEGRATED EXECUTION PROTOCOL"})}),"\n",(0,t.jsx)(i.h2,{id:"\ufe0f-critical-instructions-for-claude-code",children:"\u26a0\ufe0f CRITICAL INSTRUCTIONS FOR CLAUDE CODE"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"THIS IS A GATED PROCESS. YOU CANNOT SKIP STEPS."})}),"\n",(0,t.jsx)(i.h3,{id:"your-reference-guides-are-in",children:"YOUR REFERENCE GUIDES ARE IN:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"instruction-for-migration/\n  \u251c\u2500\u2500 migration-guide.md          # Basic migration steps\n  \u251c\u2500\u2500 state-and-providers-guide.md # State & provider details\n  \u251c\u2500\u2500 prompt-and-generation-guide.md # Template & generation migration\n  \u251c\u2500\u2500 advanced-migration-guide.md  # Services, settings, evaluators\n  \u251c\u2500\u2500 testing-guide.md               # Complete testing guide\n  \u2514\u2500\u2500 completion-requirements.md       # Final setup requirements\n"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"YOU MUST REFERENCE THESE GUIDES AT EACH STEP"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"execution-protocol---gate-system",children:"EXECUTION PROTOCOL - GATE SYSTEM"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"GATE 0: Branch \u2192 GATE 1: Analysis \u2192 GATE 2: Setup \u2192 GATE 3: Build\n\u2192 GATE 4: TypeScript \u2192 GATE 5: Migration \u2192 GATE 6: Tests (95%+)\n\u2192 GATE 7: Final \u2192 GATE 8: Verification\n"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-0-create-1x-branch-",children:"GATE 0: CREATE 1.x BRANCH \u2713"}),"\n",(0,t.jsx)(i.h3,{id:"execute",children:"Execute:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"git checkout -b 1.x\n"})}),"\n",(0,t.jsx)(i.h3,{id:"gate-check",children:"Gate Check:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"git branch --show-current\n"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsxs)(i.strong,{children:["\u2713 MUST OUTPUT: ",(0,t.jsx)(i.code,{children:"1.x"})]})}),"\n",(0,t.jsxs)(i.p,{children:["\u274c ",(0,t.jsx)(i.strong,{children:"STOP"})," if not on 1.x branch"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-1-complete-analysis-",children:"GATE 1: COMPLETE ANALYSIS \u2713"}),"\n",(0,t.jsx)(i.h3,{id:"reference",children:"Reference:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Check all sections from ",(0,t.jsx)(i.code,{children:"migration-guide.md"})," Step 6-7"]}),"\n",(0,t.jsxs)(i.li,{children:["Check ",(0,t.jsx)(i.code,{children:"advanced-migration-guide.md"})," for services/evaluators"]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"execute-analysis",children:"Execute Analysis:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:'# Identify plugin\ncat package.json | grep -E \'"name"|"version"\'\n\n# List all source files\nfind src -name "*.ts" -type f | sort\n\n# Check for deprecated files\nls -la | grep -E "biome|vitest|\\.lock"\n'})}),"\n",(0,t.jsx)(i.h3,{id:"required-output---complete-this",children:"REQUIRED OUTPUT - COMPLETE THIS:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"=== PLUGIN MIGRATION ANALYSIS ===\nPlugin: [name from package.json]\nVersion: [current version]\n\n1. FILES TO DELETE (check migration-guide.md Step 2):\n   \u25a1 biome.json: [EXISTS/NOT FOUND]\n   \u25a1 vitest.config.ts: [EXISTS/NOT FOUND]\n   \u25a1 *.lock files: [list any found]\n\n2. PACKAGE NAME (check migration-guide.md Step 3.1.5):\n   \u25a1 Current: [exact name]\n   \u25a1 Needs fix: [YES if @elizaos-plugins/ / NO]\n\n3. ACTIONS (check migration-guide.md Step 6):\n   \u25a1 src/actions/[name].ts\n     - Purpose: [what it does]\n     - Uses composeContext: [YES/NO]\n     - Uses generateObject: [YES/NO]\n     - Uses ModelClass: [YES/NO]\n     - Has JSON templates: [YES/NO]\n     - Uses updateRecentMessageState: [YES/NO]\n\n4. PROVIDERS (check migration-guide.md Step 7):\n   \u25a1 src/providers/[name].ts\n     - Has 'name' property: [YES/NO]\n     - Returns ProviderResult: [YES/NO]\n     - State parameter optional: [YES/NO]\n\n5. EVALUATORS (check advanced-migration-guide.md):\n   \u25a1 [list any evaluators and issues]\n\n6. SERVICES (check advanced-migration-guide.md):\n   \u25a1 [list any services with singleton pattern]\n\n7. SETTINGS USAGE (check advanced-migration-guide.md):\n   \u25a1 Files importing 'settings': [list files]\n\n8. EXISTING TESTS:\n   \u25a1 Test files: [list or \"NONE\"]\n   \u25a1 Framework: [vitest/bun/none]\n=== END ANALYSIS ===\n"})}),"\n",(0,t.jsxs)(i.p,{children:["\u274c ",(0,t.jsx)(i.strong,{children:"STOP"})," - Analysis must be 100% complete"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-2-initial-setup-",children:"GATE 2: INITIAL SETUP \u2713"}),"\n",(0,t.jsxs)(i.h3,{id:"reference-follow-migration-guidemd-steps-1-5-exactly",children:["Reference: Follow ",(0,t.jsx)(i.code,{children:"migration-guide.md"})," Steps 1-5 EXACTLY"]}),"\n",(0,t.jsx)(i.h3,{id:"21-clean-files-migration-guidemd-step-2",children:"2.1 Clean Files (migration-guide.md Step 2)"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"rm -f biome.json vitest.config.ts\nrm -f *.lock *.yml.lock\n"})}),"\n",(0,t.jsx)(i.h3,{id:"22-update-packagejson-migration-guidemd-step-3",children:"2.2 Update package.json (migration-guide.md Step 3)"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"CRITICAL"}),": Check Step 3.1.5 for name fix"]}),"\n",(0,t.jsx)(i.li,{children:"Copy ALL sections from Step 3"}),"\n",(0,t.jsxs)(i.li,{children:["Don't forget ",(0,t.jsx)(i.code,{children:"agentConfig"})," (Step 3.6)"]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"23-typescript-config-migration-guidemd-step-4",children:"2.3 TypeScript Config (migration-guide.md Step 4)"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Create tsconfig.json (Step 4.2)"}),"\n",(0,t.jsx)(i.li,{children:"Create tsconfig.build.json (Step 4.3)"}),"\n",(0,t.jsx)(i.li,{children:"Create tsup.config.ts (Step 4.1)"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"24-build-test-migration-guidemd-step-5",children:"2.4 Build Test (migration-guide.md Step 5)"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"rm -rf dist node_modules .turbo\nbun install\nbun run build\n"})}),"\n",(0,t.jsx)(i.h3,{id:"gate-check-1",children:"Gate Check:"}),"\n",(0,t.jsxs)(i.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Build completes"]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",disabled:!0})," ","dist/ folder exists"]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["\u274c ",(0,t.jsx)(i.strong,{children:"STOP"})," if build fails"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-3-build-must-pass-",children:"GATE 3: BUILD MUST PASS \u2713"}),"\n",(0,t.jsx)(i.h3,{id:"loop-until-build-passes",children:"Loop Until Build Passes:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:'while ! bun run build; do\n    echo "Build failed. Check errors above."\n    # Fix errors using migration-guide.md\n    # Common issues are in Step 6.1 (imports)\ndone\n'})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-4-typescript-must-pass-",children:"GATE 4: TYPESCRIPT MUST PASS \u2713"}),"\n",(0,t.jsxs)(i.h3,{id:"reference-check-advanced-migration-guidemd-for-type-issues",children:["Reference: Check ",(0,t.jsx)(i.code,{children:"advanced-migration-guide.md"})," for type issues"]}),"\n",(0,t.jsx)(i.h3,{id:"loop-until-no-errors",children:"Loop Until No Errors:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:'while ! bunx tsc --noEmit; do\n    echo "TypeScript errors found."\n    # Fix using appropriate guide:\n    # - State types: state-and-providers-guide.md\n    # - Action types: migration-guide.md Step 6\n    # - Provider types: migration-guide.md Step 7\ndone\n'})}),"\n",(0,t.jsxs)(i.p,{children:["\u274c ",(0,t.jsx)(i.strong,{children:"STOP"})," - Do not proceed with TypeScript errors"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-5-code-migration-",children:"GATE 5: CODE MIGRATION \u2713"}),"\n",(0,t.jsx)(i.h3,{id:"for-each-file-identified-in-analysis",children:"For EACH File Identified in Analysis:"}),"\n",(0,t.jsx)(i.h4,{id:"actions-use-migration-guidemd-step-6",children:"ACTIONS (Use migration-guide.md Step 6):"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"Update imports (Step 6.1)"}),"\n",(0,t.jsx)(i.li,{children:"Fix state handling (Step 6.2)"}),"\n",(0,t.jsx)(i.li,{children:"Replace composeContext (Step 6.3)"}),"\n",(0,t.jsx)(i.li,{children:"Convert templates to XML (Step 6.4)"}),"\n",(0,t.jsx)(i.li,{children:"Replace generateObject (Step 6.5)"}),"\n",(0,t.jsx)(i.li,{children:"Update handler pattern (Step 6.7)"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"After EACH action file:"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"bun run build  # MUST PASS\n"})}),"\n",(0,t.jsx)(i.h4,{id:"providers-use-migration-guidemd-step-7",children:"PROVIDERS (Use migration-guide.md Step 7):"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"Add 'name' property (Step 7.3)"}),"\n",(0,t.jsx)(i.li,{children:"Update return type (Step 7.3)"}),"\n",(0,t.jsx)(i.li,{children:"Make state non-optional (Step 7.3)"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"After EACH provider file:"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"bun run build  # MUST PASS\n"})}),"\n",(0,t.jsx)(i.h4,{id:"advanced-features",children:"ADVANCED FEATURES:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Settings"}),': Use advanced-migration-guide.md Section "Settings Management"']}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Services"}),': Use advanced-migration-guide.md Section "Services & Clients Migration"']}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Evaluators"}),': Use advanced-migration-guide.md Section "Evaluators Migration"']}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"special-cases",children:"SPECIAL CASES:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"State Issues"}),": Check state-and-providers-guide.md"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Prompt/Generation Issues"}),": Check prompt-and-generation-guide.md"]}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-6-tests-must-reach-95-",children:"GATE 6: TESTS MUST REACH 95%+ \u2713"}),"\n",(0,t.jsx)(i.h3,{id:"reference-use-testing-guidemd-completely",children:"Reference: Use testing-guide.md COMPLETELY"}),"\n",(0,t.jsx)(i.h3,{id:"61-create-test-structure-testing-guidemd-section-1",children:"6.1 Create Test Structure (testing-guide.md Section 1)"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"mkdir -p src/__tests__\n"})}),"\n",(0,t.jsx)(i.h3,{id:"62-create-test-utilsts-testing-guidemd-section-2",children:"6.2 Create test-utils.ts (testing-guide.md Section 2)"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Copy the ENTIRE test-utils.ts from the guide"}),"\n",(0,t.jsx)(i.li,{children:"Don't skip any mock functions"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"63-write-tests-following-examples",children:"6.3 Write Tests Following Examples:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Actions: testing-guide.md Section 3"}),"\n",(0,t.jsx)(i.li,{children:"Providers: testing-guide.md Section 4"}),"\n",(0,t.jsx)(i.li,{children:"Evaluators: testing-guide.md Section 5"}),"\n",(0,t.jsx)(i.li,{children:"Services: testing-guide.md Section 6"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"64-coverage-loop",children:"6.4 Coverage Loop:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"# MUST LOOP UNTIL COVERAGE >= 95%\nwhile true; do\n    bun test --coverage\n    # Check coverage percentage\n    # If < 95%, add more tests using testing-guide.md examples\n    # Common missing coverage:\n    # - Error cases (Section 8)\n    # - Edge cases (Section 9.4)\n    # - All branches (Section 9.7)\ndone\n"})}),"\n",(0,t.jsx)(i.h3,{id:"common-test-issues-testing-guidemd-section-10",children:"Common Test Issues (testing-guide.md Section 10):"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Tests fail together: Add proper cleanup"}),"\n",(0,t.jsx)(i.li,{children:"Mocks not called: Set before calling action"}),"\n",(0,t.jsx)(i.li,{children:"Timeouts: Mock ALL async dependencies"}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["\u274c ",(0,t.jsx)(i.strong,{children:"STOP"})," - Must have 95%+ coverage"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-7-final-setup-",children:"GATE 7: FINAL SETUP \u2713"}),"\n",(0,t.jsx)(i.h3,{id:"reference-follow-completion-requirementsmd-exactly",children:"Reference: Follow completion-requirements.md EXACTLY"}),"\n",(0,t.jsx)(i.h3,{id:"71-create-required-files",children:"7.1 Create Required Files:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:".gitignore (Section 1)"}),"\n",(0,t.jsx)(i.li,{children:".npmignore (Section 2)"}),"\n",(0,t.jsx)(i.li,{children:"LICENSE (Section 3) - COPY EXACTLY"}),"\n",(0,t.jsx)(i.li,{children:".prettierrc (Section 7) - COPY EXACTLY"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"72-github-workflow-section-6",children:"7.2 GitHub Workflow (Section 6):"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"CRITICAL"}),": Copy ",(0,t.jsx)(i.code,{children:".github/workflows/npm-deploy.yml"})," EXACTLY from the guide"]}),"\n",(0,t.jsx)(i.h3,{id:"73-verify-packagejson-section-4",children:"7.3 Verify package.json (Section 4):"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Check ALL fields listed"}),"\n",(0,t.jsx)(i.li,{children:"Ensure agentConfig is complete"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"74-format-code",children:"7.4 Format Code:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"bun run format\n"})}),"\n",(0,t.jsx)(i.h3,{id:"75-update-readme",children:"7.5 Update README:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Replace all ",(0,t.jsx)(i.code,{children:"pnpm"}),"/",(0,t.jsx)(i.code,{children:"npm"})," with ",(0,t.jsx)(i.code,{children:"bun"})]}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"gate-8-final-verification-",children:"GATE 8: FINAL VERIFICATION \u2713"}),"\n",(0,t.jsx)(i.h3,{id:"clean-build-test",children:"Clean Build Test:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"rm -rf dist node_modules .turbo\nbun install\nbun run build\nbunx tsc --noEmit\nbun test --coverage\n"})}),"\n",(0,t.jsx)(i.h3,{id:"all-must-pass",children:"All Must Pass:"}),"\n",(0,t.jsxs)(i.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Build: 0 errors"]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",disabled:!0})," ","TypeScript: 0 errors"]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Tests: All pass"]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Coverage: \u226595%"]}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-when-stuck---guide-reference",children:"\ud83d\udea8 WHEN STUCK - GUIDE REFERENCE"}),"\n",(0,t.jsx)(i.h3,{id:"buildsetup-issues",children:"Build/Setup Issues:"}),"\n",(0,t.jsxs)(i.p,{children:["\u2192 Check ",(0,t.jsx)(i.code,{children:"migration-guide.md"})," Steps 1-5"]}),"\n",(0,t.jsx)(i.h3,{id:"action-migration-issues",children:"Action Migration Issues:"}),"\n",(0,t.jsxs)(i.p,{children:["\u2192 Check ",(0,t.jsx)(i.code,{children:"migration-guide.md"})," Step 6\n\u2192 For state: ",(0,t.jsx)(i.code,{children:"state-and-providers-guide.md"}),"\n\u2192 For templates: ",(0,t.jsx)(i.code,{children:"prompt-and-generation-guide.md"})]}),"\n",(0,t.jsx)(i.h3,{id:"provider-issues",children:"Provider Issues:"}),"\n",(0,t.jsxs)(i.p,{children:["\u2192 Check ",(0,t.jsx)(i.code,{children:"migration-guide.md"})," Step 7\n\u2192 For details: ",(0,t.jsx)(i.code,{children:"state-and-providers-guide.md"}),' "Providers in v1"']}),"\n",(0,t.jsx)(i.h3,{id:"servicesettings-issues",children:"Service/Settings Issues:"}),"\n",(0,t.jsxs)(i.p,{children:["\u2192 Check ",(0,t.jsx)(i.code,{children:"advanced-migration-guide.md"})]}),"\n",(0,t.jsx)(i.h3,{id:"test-issues",children:"Test Issues:"}),"\n",(0,t.jsxs)(i.p,{children:["\u2192 Check ",(0,t.jsx)(i.code,{children:"testing-guide.md"})," Section 10\n\u2192 For examples: Sections 3-7"]}),"\n",(0,t.jsx)(i.h3,{id:"final-setup",children:"Final Setup:"}),"\n",(0,t.jsxs)(i.p,{children:["\u2192 Check ",(0,t.jsx)(i.code,{children:"completion-requirements.md"})]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-do-not-proceed-if",children:"\u274c DO NOT PROCEED IF:"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Build has errors"})," - Fix using guides"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"TypeScript has errors"})," - Fix using guides"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Tests fail"})," - Fix using testing-guide.md"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Coverage < 95%"})," - Add tests using examples"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Any gate check fails"})," - Go back and complete"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"-migration-complete-when",children:"\u2705 MIGRATION COMPLETE WHEN:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"git branch --show-current  # Shows: 1.x\nbun run build             # 0 errors\nbunx tsc --noEmit        # 0 errors\nbun test --coverage      # All pass, \u226595%\nls -la dist/             # Has index.js & index.d.ts\ncat .github/workflows/npm-deploy.yml  # Exists\n"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"ALL MUST SUCCEED"})})]})}function u(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},71184:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>r});var s=n(14041);const t={},l=s.createContext(t);function d(e){const i=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(l.Provider,{value:i},e.children)}}}]);