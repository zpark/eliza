"use strict";(self.webpackChunk_elizaos_docs=self.webpackChunk_elizaos_docs||[]).push([[65783],{25615:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"plugins/near","title":"@elizaos/plugin-near","description":"NEAR Protocol integration plugin for Eliza OS that enables token management, transfers, and swaps using Ref Finance.","source":"@site/packages/plugins/near.md","sourceDirName":"plugins","slug":"/plugins/near","permalink":"/packages/plugins/near","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"@elizaos/plugin-multiversx","permalink":"/packages/plugins/multiversx"},"next":{"title":"@elizaos/plugin-news","permalink":"/packages/plugins/news"}}');var l=i(31085),r=i(71184);const t={},a="@elizaos/plugin-near",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Token Transfer",id:"token-transfer",level:3},{value:"Token Swap",id:"token-swap",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Actions",id:"actions",level:3},{value:"<code>SEND_NEAR</code>",id:"send_near",level:4},{value:"<code>EXECUTE_SWAP_NEAR</code>",id:"execute_swap_near",level:4},{value:"Providers",id:"providers",level:3},{value:"Wallet Provider",id:"wallet-provider",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Testing",id:"testing",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Contributing",id:"contributing",level:2},{value:"Credits",id:"credits",level:2},{value:"License",id:"license",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"elizaosplugin-near",children:"@elizaos/plugin-near"})}),"\n",(0,l.jsx)(n.p,{children:"NEAR Protocol integration plugin for Eliza OS that enables token management, transfers, and swaps using Ref Finance."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"This plugin aims to be the basis of all interactions with the NEAR ecosystem, providing seamless integration with NEAR Protocol and Ref Finance DEX."}),"\n",(0,l.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"NEAR token transfers"}),"\n",(0,l.jsx)(n.li,{children:"Token swaps via Ref Finance"}),"\n",(0,l.jsx)(n.li,{children:"Multiple network support (mainnet, testnet)"}),"\n",(0,l.jsx)(n.li,{children:"Secure transaction signing"}),"\n",(0,l.jsx)(n.li,{children:"Automatic storage deposit handling"}),"\n",(0,l.jsx)(n.li,{children:"Real-time price feeds"}),"\n",(0,l.jsx)(n.li,{children:"Portfolio tracking and management"}),"\n",(0,l.jsx)(n.li,{children:"Smart routing for optimal swaps"}),"\n",(0,l.jsx)(n.li,{children:"Built-in denomination handling"}),"\n",(0,l.jsx)(n.li,{children:"Comprehensive error handling"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"bun install @elizaos/plugin-near\n"})}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsx)(n.p,{children:"The plugin requires environment variables or runtime settings:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-env",children:"NEAR_WALLET_SECRET_KEY=your-wallet-private-key\nNEAR_WALLET_PUBLIC_KEY=your-wallet-public-key\nNEAR_ADDRESS=your-account.near\nNEAR_NETWORK=testnet  # mainnet or testnet\nNEAR_RPC_URL=https://neart.lava.build\nNEAR_SLIPPAGE=0.01  # 1% slippage tolerance\n"})}),"\n",(0,l.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(n.h3,{id:"token-transfer",children:"Token Transfer"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import { nearPlugin } from '@elizaos/plugin-near';\n\n// Send NEAR\nconst result = await eliza.execute({\n  action: 'SEND_NEAR',\n  content: {\n    recipient: 'bob.near',\n    amount: '1.5',\n  },\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"token-swap",children:"Token Swap"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"const result = await eliza.execute({\n  action: 'EXECUTE_SWAP_NEAR',\n  content: {\n    inputTokenId: 'wrap.near',\n    outputTokenId: 'token.v2.ref-finance.near',\n    amount: '10',\n  },\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,l.jsx)(n.h3,{id:"actions",children:"Actions"}),"\n",(0,l.jsx)(n.h4,{id:"send_near",children:(0,l.jsx)(n.code,{children:"SEND_NEAR"})}),"\n",(0,l.jsx)(n.p,{children:"Transfers NEAR tokens to another account."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"{\n  action: 'SEND_NEAR',\n  content: {\n    recipient: string,    // Recipient's NEAR account (e.g., \"bob.near\")\n    amount: string,       // Amount to send (in NEAR)\n    tokenAddress?: string // Optional: for NEP-141 tokens\n  }\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"execute_swap_near",children:(0,l.jsx)(n.code,{children:"EXECUTE_SWAP_NEAR"})}),"\n",(0,l.jsx)(n.p,{children:"Executes a token swap using Ref Finance."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"{\n  action: 'EXECUTE_SWAP_NEAR',\n  content: {\n    inputTokenId: string,  // Input token contract (e.g., \"wrap.near\")\n    outputTokenId: string, // Output token contract\n    amount: string,        // Amount to swap\n    slippageTolerance?: number // Optional: default from config\n  }\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"providers",children:"Providers"}),"\n",(0,l.jsx)(n.h4,{id:"wallet-provider",children:"Wallet Provider"}),"\n",(0,l.jsx)(n.p,{children:"Provides wallet information and portfolio tracking."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"const walletInfo = await eliza.getProvider('wallet');\n// Returns formatted portfolio including:\n// - Account balance\n// - Token balances\n// - USD values\n// - Market prices\n"})}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Transaction Failures"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Check account balance"}),"\n",(0,l.jsx)(n.li,{children:"Verify storage deposits"}),"\n",(0,l.jsx)(n.li,{children:"Ensure sufficient gas"}),"\n",(0,l.jsx)(n.li,{children:"Confirm slippage tolerance"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Connection Problems"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Verify RPC endpoint"}),"\n",(0,l.jsx)(n.li,{children:"Check network selection"}),"\n",(0,l.jsx)(n.li,{children:"Ensure valid credentials"}),"\n",(0,l.jsx)(n.li,{children:"Monitor API rate limits"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Swap Issues"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Verify token pairs exist"}),"\n",(0,l.jsx)(n.li,{children:"Check liquidity pools"}),"\n",(0,l.jsx)(n.li,{children:"Confirm price impact"}),"\n",(0,l.jsx)(n.li,{children:"Monitor slippage settings"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Key Management"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Store private keys securely"}),"\n",(0,l.jsx)(n.li,{children:"Use environment variables"}),"\n",(0,l.jsx)(n.li,{children:"Implement key rotation"}),"\n",(0,l.jsx)(n.li,{children:"Monitor account activity"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Transaction Safety"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Validate all inputs"}),"\n",(0,l.jsx)(n.li,{children:"Implement amount limits"}),"\n",(0,l.jsx)(n.li,{children:"Double-check recipients"}),"\n",(0,l.jsx)(n.li,{children:"Monitor transaction status"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Network Security"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use secure RPC endpoints"}),"\n",(0,l.jsx)(n.li,{children:"Implement retry mechanisms"}),"\n",(0,l.jsx)(n.li,{children:"Monitor for suspicious activity"}),"\n",(0,l.jsx)(n.li,{children:"Keep dependencies updated"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Log all transaction attempts"}),"\n",(0,l.jsx)(n.li,{children:"Handle timeouts gracefully"}),"\n",(0,l.jsx)(n.li,{children:"Validate all user inputs"}),"\n",(0,l.jsx)(n.li,{children:"Provide clear error messages"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,l.jsx)(n.p,{children:"Run the test suite:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"bun test\n"})}),"\n",(0,l.jsx)(n.p,{children:"Watch mode for development:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"bun test:watch\n"})}),"\n",(0,l.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"near-api-js: ^5.0.1"}),"\n",(0,l.jsx)(n.li,{children:"@ref-finance/ref-sdk: ^1.4.6"}),"\n",(0,l.jsx)(n.li,{children:"bignumber.js: ^9.1.2"}),"\n",(0,l.jsx)(n.li,{children:"node-cache: ^5.1.2"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"contributing",children:"Contributing"}),"\n",(0,l.jsx)(n.p,{children:"Contributions are welcome! Please see the CONTRIBUTING.md file for more information."}),"\n",(0,l.jsx)(n.h2,{id:"credits",children:"Credits"}),"\n",(0,l.jsx)(n.p,{children:"This plugin integrates with:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://near.org/",children:"NEAR Protocol"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://ref.finance/",children:"Ref Finance"})}),"\n",(0,l.jsx)(n.li,{children:"Official NEAR JavaScript API and SDKs"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Special thanks to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The NEAR Protocol team for developing the NEAR blockchain"}),"\n",(0,l.jsx)(n.li,{children:"The Ref Finance team for developing the Ref Finance DEX"}),"\n",(0,l.jsx)(n.li,{children:"The Eliza community for their contributions and feedback."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"For more information about NEAR blockchain capabilities:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.near.org/",children:"NEAR Documentation"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://near.org/developers",children:"NEAR Developer Portal"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://nearscan.io/",children:"NEAR Network Dashboard"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/nearprotocol/near-api-js",children:"NEAR GitHub Repository"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,l.jsx)(n.p,{children:"This plugin is part of the Eliza project. See the main project repository for license information."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},71184:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(14041);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);