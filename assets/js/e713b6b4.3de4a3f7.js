"use strict";(self.webpackChunk_elizaos_docs=self.webpackChunk_elizaos_docs||[]).push([[46421],{58839:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"plugins/whatsapp","title":"@elizaos/plugin-whatsapp","description":"A plugin for integrating WhatsApp Cloud API with your application, providing comprehensive messaging capabilities and webhook handling.","source":"@site/packages/plugins/whatsapp.md","sourceDirName":"plugins","slug":"/plugins/whatsapp","permalink":"/packages/plugins/whatsapp","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"@elizaos/plugin-web-search","permalink":"/packages/plugins/web-search"},"next":{"title":"@elizaos/plugin-youtube-to-text","permalink":"/packages/plugins/youtube-to-text"}}');var l=s(31085),a=s(71184);const t={},r="@elizaos/plugin-whatsapp",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Usage",id:"usage",level:2},{value:"Basic Setup",id:"basic-setup",level:3},{value:"Sending Messages",id:"sending-messages",level:3},{value:"Handling Webhooks",id:"handling-webhooks",level:3},{value:"Features",id:"features",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Core Interfaces",id:"core-interfaces",level:3},{value:"Plugin Methods",id:"plugin-methods",level:3},{value:"Development",id:"development",level:2},{value:"Building",id:"building",level:3},{value:"Testing",id:"testing",level:3},{value:"Linting",id:"linting",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Contributing",id:"contributing",level:2},{value:"Credits",id:"credits",level:2},{value:"License",id:"license",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"elizaosplugin-whatsapp",children:"@elizaos/plugin-whatsapp"})}),"\n",(0,l.jsx)(n.p,{children:"A plugin for integrating WhatsApp Cloud API with your application, providing comprehensive messaging capabilities and webhook handling."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"This plugin provides functionality to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Send text and template messages via WhatsApp"}),"\n",(0,l.jsx)(n.li,{children:"Handle incoming webhook events"}),"\n",(0,l.jsx)(n.li,{children:"Manage message status updates"}),"\n",(0,l.jsx)(n.li,{children:"Process message delivery notifications"}),"\n",(0,l.jsx)(n.li,{children:"Handle authentication and session management"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm install @elizaos/plugin-whatsapp\n"})}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsx)(n.p,{children:"The plugin requires the following environment variables:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-env",children:"WHATSAPP_ACCESS_TOKEN=your_access_token       # Required: WhatsApp Cloud API access token\nWHATSAPP_PHONE_NUMBER_ID=your_phone_number_id # Required: WhatsApp business phone number ID\nWHATSAPP_WEBHOOK_TOKEN=your_webhook_token     # Optional: Webhook verification token\nWHATSAPP_BUSINESS_ID=your_business_id        # Optional: Business account ID\n"})}),"\n",(0,l.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(n.h3,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import { WhatsAppPlugin } from '@elizaos/plugin-whatsapp';\n\nconst whatsappPlugin = new WhatsAppPlugin({\n  accessToken: 'your_access_token',\n  phoneNumberId: 'your_phone_number_id',\n  webhookVerifyToken: 'your_webhook_verify_token',\n  businessAccountId: 'your_business_account_id',\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"sending-messages",children:"Sending Messages"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// Send a text message\nawait whatsappPlugin.sendMessage({\n  type: 'text',\n  to: '1234567890',\n  content: 'Hello from WhatsApp!',\n});\n\n// Send a template message\nawait whatsappPlugin.sendMessage({\n  type: 'template',\n  to: '1234567890',\n  content: {\n    name: 'hello_world',\n    language: {\n      code: 'en',\n    },\n  },\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"handling-webhooks",children:"Handling Webhooks"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// Verify webhook\napp.get('/webhook', (req, res) => {\n  const verified = await whatsappPlugin.verifyWebhook(req.query['hub.verify_token']);\n  if (verified) {\n    res.send(req.query['hub.challenge']);\n  } else {\n    res.sendStatus(403);\n  }\n});\n\n// Handle webhook events\napp.post('/webhook', (req, res) => {\n  await whatsappPlugin.handleWebhook(req.body);\n  res.sendStatus(200);\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Send text messages"}),"\n",(0,l.jsx)(n.li,{children:"Send template messages"}),"\n",(0,l.jsx)(n.li,{children:"Webhook verification"}),"\n",(0,l.jsx)(n.li,{children:"Webhook event handling"}),"\n",(0,l.jsx)(n.li,{children:"Message status updates"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.p,{children:"The plugin throws errors in the following cases:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"try {\n  await whatsappPlugin.sendMessage({\n    type: 'text',\n    to: '1234567890',\n    content: 'Hello!',\n  });\n} catch (error) {\n  console.error('Failed to send message:', error.message);\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"Common error cases:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Invalid configuration"}),"\n",(0,l.jsx)(n.li,{children:"Failed message sending"}),"\n",(0,l.jsx)(n.li,{children:"Webhook verification failure"}),"\n",(0,l.jsx)(n.li,{children:"Invalid webhook payload"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Always validate phone numbers before sending messages"}),"\n",(0,l.jsx)(n.li,{children:"Use template messages for first-time messages to users"}),"\n",(0,l.jsx)(n.li,{children:"Store message IDs for tracking delivery status"}),"\n",(0,l.jsx)(n.li,{children:"Implement proper error handling"}),"\n",(0,l.jsx)(n.li,{children:"Set up webhook retry mechanisms"}),"\n",(0,l.jsx)(n.li,{children:"Keep your access tokens secure"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,l.jsx)(n.h3,{id:"core-interfaces",children:"Core Interfaces"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface WhatsAppConfig {\n  accessToken: string;\n  phoneNumberId: string;\n  webhookVerifyToken?: string;\n  businessAccountId?: string;\n}\n\ninterface WhatsAppMessage {\n  type: 'text' | 'template';\n  to: string;\n  content: string | WhatsAppTemplate;\n}\n\ninterface WhatsAppTemplate {\n  name: string;\n  language: {\n    code: string;\n  };\n  components?: Array<{\n    type: string;\n    parameters: Array<{\n      type: string;\n      text?: string;\n    }>;\n  }>;\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"plugin-methods",children:"Plugin Methods"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"sendMessage"}),": Send WhatsApp messages"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"handleWebhook"}),": Process incoming webhook events"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"verifyWebhook"}),": Verify webhook authenticity"]}),"\n",(0,l.jsx)(n.li,{children:"Message and status handlers"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"development",children:"Development"}),"\n",(0,l.jsx)(n.h3,{id:"building",children:"Building"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm run build\n"})}),"\n",(0,l.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm run test\n"})}),"\n",(0,l.jsx)(n.h3,{id:"linting",children:"Linting"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm run lint\n"})}),"\n",(0,l.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Store credentials securely using environment variables"}),"\n",(0,l.jsx)(n.li,{children:"Validate all phone numbers before sending messages"}),"\n",(0,l.jsx)(n.li,{children:"Use template messages for first-time contacts"}),"\n",(0,l.jsx)(n.li,{children:"Implement proper error handling"}),"\n",(0,l.jsx)(n.li,{children:"Keep dependencies updated"}),"\n",(0,l.jsx)(n.li,{children:"Monitor API usage and rate limits"}),"\n",(0,l.jsx)(n.li,{children:"Use HTTPS for all API communication"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"contributing",children:"Contributing"}),"\n",(0,l.jsx)(n.p,{children:"Contributions are welcome! Please see the CONTRIBUTING.md file for more information."}),"\n",(0,l.jsx)(n.h2,{id:"credits",children:"Credits"}),"\n",(0,l.jsx)(n.p,{children:"This plugin integrates with and builds upon several key technologies:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://developers.facebook.com/docs/whatsapp/cloud-api",children:"WhatsApp Cloud API"}),": Meta's official WhatsApp Business Platform"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://axios-http.com/",children:"Axios"}),": Promise-based HTTP client for API requests"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://developers.facebook.com/",children:"Meta for Developers"}),": Meta's developer platform and tools"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Special thanks to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The Eliza community for their contributions and feedback"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"For more information about WhatsApp Cloud API and its capabilities, visit:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://developers.facebook.com/docs/whatsapp/cloud-api/overview",children:"WhatsApp Business Platform Documentation"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://developers.facebook.com/blog/",children:"Meta for Developers Blog"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/WhatsApp/WhatsApp-Business-API-Setup-Scripts",children:"WhatsApp Business API GitHub"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,l.jsx)(n.p,{children:"This plugin is part of the Eliza project. See the main project repository for license information."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},71184:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>r});var i=s(14041);const l={},a=i.createContext(l);function t(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);