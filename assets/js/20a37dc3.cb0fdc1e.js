"use strict";(self.webpackChunk_elizaos_docs=self.webpackChunk_elizaos_docs||[]).push([[80058],{19187:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"plugins/sgx","title":"SGX Plugin for Eliza","description":"The SGX Plugin for Eliza enhances the platform by providing Intel SGX attestation capabilities.","source":"@site/packages/plugins/sgx.md","sourceDirName":"plugins","slug":"/plugins/sgx","permalink":"/packages/plugins/sgx","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"@elizaos/plugin-sei","permalink":"/packages/plugins/sei"},"next":{"title":"@elizaos/plugin-solana-agent-kit","permalink":"/packages/plugins/solana-agent-kit"}}');var a=t(31085),s=t(71184);const r={},o="SGX Plugin for Eliza",l={},c=[{value:"Trusted Execution Environment (TEE)",id:"trusted-execution-environment-tee",level:3},{value:"Software Guard Extensions (SGX)",id:"software-guard-extensions-sgx",level:3},{value:"Attestation",id:"attestation",level:3},{value:"Gramine",id:"gramine",level:3},{value:"Components",id:"components",level:2},{value:"Providers",id:"providers",level:3},{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:3},{value:"Quick Start",id:"quick-start",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"sgx-plugin-for-eliza",children:"SGX Plugin for Eliza"})}),"\n",(0,a.jsx)(n.p,{children:"The SGX Plugin for Eliza enhances the platform by providing Intel SGX attestation capabilities."}),"\n",(0,a.jsx)(n.p,{children:"Intel SGX is part of the Intel confidential computing technology portfolio that allows businesses to take advantage of the cloud while staying in control of their data. Intel SGX protects data actively being used in the processor and memory by creating a trusted execution environment (TEE) called an enclave."}),"\n",(0,a.jsx)(n.h3,{id:"trusted-execution-environment-tee",children:"Trusted Execution Environment (TEE)"}),"\n",(0,a.jsx)(n.p,{children:"A Trusted Execution Environment (TEE) is a secure area within a main processor that ensures sensitive data is stored, processed, and protected in an isolated environment. TEEs provide a higher level of security by allowing applications to run in a protected space, safeguarding them from unauthorized access and potential threats."}),"\n",(0,a.jsx)(n.h3,{id:"software-guard-extensions-sgx",children:"Software Guard Extensions (SGX)"}),"\n",(0,a.jsx)(n.p,{children:"Software Guard Extensions is a set of instructions on Intel processors for creating Trusted Execution Environments (TEE). SGX enables the creation of enclaves, which are protected areas of execution that ensure the confidentiality and integrity of the code and data within them. This allows applications to run securely, even in untrusted environments, by protecting sensitive information from being exposed to the host operating system or other applications."}),"\n",(0,a.jsx)(n.h3,{id:"attestation",children:"Attestation"}),"\n",(0,a.jsx)(n.p,{children:"The attestation of TEE is a security mechanism that enables a TEE to provide cryptographic proof of its integrity and authenticity to external parties. By generating a unique attestation report that includes information about the software and its execution state, a TEE can assure remote verifiers that the code running within it has not been altered and is operating as intended. This process is essential for establishing trust in secure applications, allowing them to interact confidently with other systems and services in potentially untrusted environments."}),"\n",(0,a.jsx)(n.h3,{id:"gramine",children:"Gramine"}),"\n",(0,a.jsxs)(n.p,{children:["The attestation capabilities are based on ",(0,a.jsx)(n.a,{href:"https://github.com/gramineproject/gramine",children:"Gramine Library OS"}),". Gramine is a Library OS for Unmodified Applications. Applications can benefit from confidentiality and integrity guarantees of Intel SGX, but developers need to be very skilled for effective partitioning and code modification for Intel SGX environment.\nGramine runs unmodified applications inside Intel SGX. It supports dynamically loaded libraries, runtime linking, multi-process abstractions, and file authentication. For additional security, Gramine performs cryptographic and semantic checks at untrusted host interface. Developers provide a manifest file to configure the application environment and isolation policies, Gramine automatically does the rest."]}),"\n",(0,a.jsx)(n.h2,{id:"components",children:"Components"}),"\n",(0,a.jsx)(n.h3,{id:"providers",children:"Providers"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"sgxAttestationProvider"}),": This provider is responsible for generating SGX remote attestations within Gramine SGX environments."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsxs)(n.p,{children:["First, you need to prepare the SGX environment and install the Gramine dependencies.\nYou can install Gramine packages in your SGX machine or use the docker image. Follow the ",(0,a.jsx)(n.a,{href:"https://gramine.readthedocs.io/en/latest/installation.html",children:"Gramine installation options"})," for more details."]}),"\n",(0,a.jsx)(n.p,{children:"Then, start eliza in SGX:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'bun i\nbun build\n\n# Start default character\nSGX=1 make start\n# Start specific character\nSGX=1 make start -- --character "character/trump.character.json"\n'})}),"\n",(0,a.jsxs)(n.p,{children:["After starting Eliza, the provider ",(0,a.jsx)(n.code,{children:"sgxAttestationProvider"})," will be registered into Eliza through plugin-sgx. The environment variable ",(0,a.jsx)(n.code,{children:"SGX"})," is required to be set to ",(0,a.jsx)(n.code,{children:"1"})," to enable plugin-sgx. And the ",(0,a.jsx)(n.code,{children:"SGX"})," is always set to ",(0,a.jsx)(n.code,{children:"1"})," in the SGX environment through the ",(0,a.jsx)(n.code,{children:"eliza.manifest.template"})," file."]}),"\n",(0,a.jsxs)(n.p,{children:["When Eliza starts, the ",(0,a.jsx)(n.code,{children:"sgxAttestationProvider"})," will generate SGX attestation in each request. And you can use the ",(0,a.jsx)(n.code,{children:"SgxAttestationProvider"})," to generate SGX remote attestations for your own plugins / clients."]}),"\n",(0,a.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"const sgxAttestationProvider = new SgxAttestationProvider();\nconst sgxAttestation = await sgxAttestationProvider.generateAttestation(userReport);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,a.jsx)(n.p,{children:"First, you need to prepare a SGX enabled machine."}),"\n",(0,a.jsx)(n.p,{children:"Then, you can use the following command to start a Gramine Docker container:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo docker run -it --name eliza_sgx \\\n    --mount type=bind,source={your_eliza_path},target=/root/eliza \\\n    --device /dev/sgx/enclave \\\n    --device /dev/sgx/provision \\\n    gramineproject/gramine:stable-jammy\n"})}),"\n",(0,a.jsx)(n.p,{children:"After entering the docker, you can use the following command to prepare the Eliza environment:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Generate the private key for signing the SGX enclave\ngramine-sgx-gen-private-key\n\ncd /root/eliza/\n\n# Install nodejs and bun\n# Node.js will be installed at `/usr/bin/node`.\n# Gramine will utilize this path as the default Node.js location to run Eliza.\n# If you prefer to use nvm for installing Node.js, please ensure to specify the Node.js path in the Makefile, as the installation path for nvm is not `/usr/bin/node`.\napt update\napt install -y build-essential\napt install -y curl\ncurl -fsSL https://deb.nodesource.com/setup_23.x | bash -\napt install -y nodejs=23.3.0-1nodesource1\nnpm install -g bun\n\n# Build Eliza\nbun i\nbun build\n\n# Copy the .env.example file to .env\ncp .env.example .env\n# Edit the .env file\n\n# Start Eliza in SGX\nSGX=1 make start -- --character "character/c3po.character.json"\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},71184:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(14041);const a={},s=i.createContext(a);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);